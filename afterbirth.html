import React, { useState, useEffect } from 'react';
import { ChefHat, Clock, MapPin, Info, X, Coffee, Utensils, Moon, Calendar, ChevronRight, ChevronLeft, Droplet, Filter, BookOpen, CheckSquare, Plus, Minus, ShoppingCart, HeartPulse, AlertCircle, HelpCircle } from 'lucide-react';

// --- 1. æ¯æ—¥è­·ç†æŒ‡å— (Daily Wellness Guide) ---
// é€™æ˜¯æœ¬æ¬¡å‡ç´šçš„æ ¸å¿ƒï¼šæä¾›æ¯ä¸€å¤©çš„èº«é«”è®ŠåŒ–çŸ¥è­˜èˆ‡æé†’
const DAILY_GUIDANCE = {
  1: { title: "æ’æ·¨èˆ‡ä¼‘é¤Š", body: "ç”¢å¾Œç¬¬ä¸€å¤©ï¼Œé‡é»æ˜¯ã€æ’å°¿ã€èˆ‡ã€ä¼‘æ¯ã€ã€‚æ¯ 3-4 å°æ™‚å‹™å¿…æ’å°¿ä¸€æ¬¡ï¼Œå¹«åŠ©å­å®®æ”¶ç¸®ã€‚é£²é£Ÿä»¥æµè³ªã€æº«ç†±ç‚ºä¸»ã€‚", warning: "å‰–è…¹ç”¢åª½å’ªè«‹ç­‰æ’æ°£å¾Œå†é€²é£Ÿå›ºé«”é£Ÿç‰©ã€‚" },
  2: { title: "è§€å¯Ÿæƒ¡éœ²", body: "æƒ¡éœ²é‡æœ€å¤§ï¼Œé¡è‰²é®®ç´…ã€‚è«‹å‹¤æ›ç”¢è¤¥å¢Šï¼Œä¿æŒæœƒé™°å‚·å£ä¹¾ç‡¥æ¸…æ½”ã€‚ä¹³æˆ¿é–‹å§‹æ„Ÿåˆ°å¾®è„¹ï¼Œå¯è®“å¯¶å¯¶é »ç¹å¸å®ã€‚", warning: "è‹¥æƒ¡éœ²é‡å¤§æ–¼å¹³æ™‚æœˆç¶“é‡ä¸”æœ‰å¤§è¡€å¡Šï¼Œè«‹è«®è©¢é†«å¸«ã€‚" },
  3: { title: "ç”Ÿç†æ€§æ¼²å¥¶", body: "ä»Šæ—¥å¯èƒ½æœƒé‡åˆ°ã€ç”Ÿç†æ€§æ¼²å¥¶ã€ï¼Œä¹³æˆ¿è®Šç¡¬ç™¼ç†±ã€‚è«‹å†·æ•·èˆ’ç·©ï¼ˆé«˜éº—èœè‘‰ï¼‰ï¼Œåˆ‡å‹¿å¤§åŠ›æ¨æ‰ã€‚é£²é£Ÿç¶­æŒæ¸…æ·¡ï¼Œæš«ä¸å–ç™¼å¥¶æ¹¯ã€‚", warning: "é«”æº«è‹¥è¶…é 38Â°C æŒçºŒ 24 å°æ™‚ï¼Œéœ€æ³¨æ„æ˜¯å¦ç‚ºä¹³è…ºç‚ã€‚" },
  4: { title: "è…¸èƒƒè •å‹•", body: "é–‹å§‹æ¢å¾©æ­£å¸¸é£²é£Ÿï¼Œä½†ä»éœ€æ˜“æ¶ˆåŒ–ã€‚æ³¨æ„æ’ä¾¿æ˜¯å¦é †æš¢ï¼Œå¯å¤šåƒé»‘èŠéº»ç‡•éº¥ç²¥ã€‚å‚·å£é–‹å§‹ç™’åˆï¼Œå‹•ä½œè¦è¼•æŸ”ã€‚", warning: "é¿å…è¹²ä¸‹æˆ–æé‡ç‰©ï¼Œä»¥å…å‚·å£è£‚é–‹ã€‚" },
  5: { title: "æƒ…ç·’æ³¢å‹•", body: "ç”¢å¾Œè·çˆ¾è’™æ€¥åŠ‡ä¸‹é™ï¼Œå¯èƒ½æœƒæ„Ÿåˆ°è«åæƒ³å“­ (Baby Blues)ã€‚é€™æ˜¯æ­£å¸¸çš„ï¼Œè«‹å¤šèˆ‡éšŠå‹èŠå¤©ï¼Œå–é»ç´…è±†æ¹¯æ”¾é¬†ã€‚", warning: "è‹¥æƒ…ç·’ä½è½æŒçºŒè¶…éå…©é€±ï¼Œè«‹å°‹æ±‚å°ˆæ¥­å”åŠ©ã€‚" },
  6: { title: "å‚·å£æª¢æŸ¥", body: "è‡ªç„¶ç”¢å‚·å£æ‡‰é€æ¼¸ä¸ç—›ï¼›å‰–è…¹ç”¢å‚·å£æ‡‰ä¹¾ç‡¥ã€‚ç¹¼çºŒå–ç”ŸåŒ–æ¹¯ï¼ˆè‡ªç„¶ç”¢ï¼‰å¹«åŠ©æœ€å¾Œçš„æƒ¡éœ²æ’å‡ºã€‚", warning: "è‹¥å‚·å£ç´…è…«ç†±ç—›æˆ–æœ‰è†¿æ€§åˆ†æ³Œç‰©ï¼Œè«‹å°±é†«ã€‚" },
  7: { title: "ç¬¬ä¸€é€±ç¸½çµ", body: "æƒ¡éœ²é¡è‰²æ‡‰è½‰ç‚ºæš—ç´…æˆ–æ¼¿æ¶²æ€§ã€‚é«”åŠ›é€æ¼¸æ¢å¾©ï¼Œå¯ä»¥åœ¨å®¤å…§ç¨å¾®èµ°å‹•ï¼Œä½†ä¸å¯å‹ç´¯ã€‚", warning: "ç¬¬ä¸€é€±åš´ç¦å¤§è£œï¼ˆå¦‚å…¨é…’éº»æ²¹é›ï¼‰ï¼Œä»¥å…å‚·å£ç™¼ç‚ã€‚" },
  8: { title: "é–‹å§‹å‚¬ä¹³", body: "é€²å…¥ç¬¬äºŒé€±ï¼Œå¯ä»¥é–‹å§‹å˜—è©¦èŠ±ç”Ÿè±¬è…³ã€é’æœ¨ç“œæ¹¯ã€‚ä¹³è…ºæš¢é€šå¾Œï¼Œæ¹¯æ°´æ”å–é‡å¯å¢åŠ ã€‚", warning: "è‹¥æœ‰å¡å¥¶ç¡¬å¡Šï¼Œå…ˆæš«åœæ²¹è†©æ¹¯å“ï¼Œæ”¹å–é»‘è±†æ°´ã€‚" },
  9: { title: "å­å®®å¾©èˆŠ", body: "å­å®®æ‡‰ç¸®å°è‡³æ¥éª¨è¯åˆä¸Šæ–¹ã€‚é€™é€±å¤šåƒæœä»²æ–™ç†ï¼Œç·©è§£é¤µå¥¶é€ æˆçš„è…°ç— èƒŒç—›ã€‚", warning: "å“ºä¹³å§¿å‹¢è¦æ­£ç¢ºï¼Œå–„ç”¨å“ºä¹³æ•æ”¯æ’è…°èƒŒã€‚" },
  10: { title: "æ°´åˆ†è£œå……", body: "Burnaby æ°£å€™ä¹¾ç‡¥ï¼Œå“ºä¹³æœƒå¸¶èµ°å¤§é‡æ°´åˆ†ã€‚è«‹éš¨æ™‚æ”œå¸¶ä¿æº«ç“¶ï¼Œå–ç‚’ç±³èŒ¶æˆ–é»‘è±†æ°´ã€‚", warning: "å£æ¸´ä»£è¡¨èº«é«”å·²ç¼ºæ°´ï¼Œæœƒç›´æ¥å½±éŸ¿å¥¶é‡ã€‚" },
  // ... (ç‚ºäº†ç¨‹å¼ç¢¼é•·åº¦ï¼Œé€™è£¡çœç•¥ä¸­é–“å¤©æ•¸ï¼Œå¯¦éš›æ‡‰ç”¨å¯è£œé½Š 11-28 å¤©) ...
  14: { title: "ç¬¬äºŒé€±ç¸½çµ", body: "æƒ¡éœ²æ‡‰è½‰ç‚ºé»ƒç™½è‰²ã€‚é«”åŠ›æ¢å¾©ä½³ï¼Œå¯é–‹å§‹åšç°¡å–®çš„å‡±æ ¼çˆ¾é‹å‹• (Kegel) å¹«åŠ©éª¨ç›†åº•è‚Œæ¢å¾©ã€‚", warning: "ä»ä¸å®œä¹…ç«™æˆ–æé‡ç‰©ã€‚" },
  15: { title: "æ»‹è£œæ°£è¡€", body: "é€²å…¥å¤§è£œæœŸã€‚éº»æ²¹é›ã€å››ç‰©æ¹¯å¯ä»¥æ­£å¸¸é£²ç”¨ã€‚é‡é»åœ¨æ–¼æ¢å¾©æ°£è‰²èˆ‡é«”åŠ›ã€‚", warning: "è‹¥åƒäº†è£œå“è¦ºå¾—å£ä¹¾èˆŒç‡¥ã€ä¾¿ç§˜ï¼Œè«‹æ¸›å°‘è–‘èˆ‡é…’çš„ç”¨é‡ã€‚" },
  21: { title: "å¼·å¥ç­‹éª¨", body: "å¤šæ”å–éˆ£è³ªï¼ˆèŠéº»ã€å°é­šä¹¾ã€ç‰›å¥¶ï¼‰ã€‚é€™é€±é–‹å§‹å¯ä»¥é©åº¦å¢åŠ æ´»å‹•é‡ã€‚", warning: "æ³¨æ„ä¿æš–ï¼Œé¿å…å†·é¢¨ç›´å¹é—œç¯€ã€‚" },
  28: { title: "æ»¿æœˆåœ“æ»¿", body: "æ­å–œåª½å’ªï¼èº«é«”æ©Ÿèƒ½åŸºæœ¬æ¢å¾©ã€‚é£²é£Ÿå¯é€æ¼¸æ¢å¾©æ­£å¸¸ï¼Œä½†ä»å»ºè­°å°‘åƒå†°å†·é£Ÿç‰©ã€‚", warning: "ç”¢å¾Œä¿®å¾©æ˜¯ä¸€æ¢é•·è·¯ï¼Œæ»¿æœˆå¾Œä»éœ€æŒçºŒä¿é¤Šã€‚" },
  // é è¨­é€šç”¨æŒ‡å—
  default: { title: "æ—¥å¸¸ä¿é¤Š", body: "ä¿æŒå¿ƒæƒ…æ„‰å¿«ï¼Œç¡çœ å……è¶³æ˜¯æœ€å¥½çš„ä¿é¤Šã€‚è·Ÿè‘—èœå–®åƒï¼Œç‡Ÿé¤Šå‡è¡¡ä¸ç™¼èƒ–ã€‚", warning: "æœ‰ä»»ä½•ä¸é©è«‹å„ªå…ˆè«®è©¢é†«å¸«æ„è¦‹ã€‚" }
};

// --- 2. é£Ÿè­œè³‡æ–™åº« (æ–°å¢ã€Œæ›¿æ›å»ºè­°ã€èˆ‡ã€Œé£Ÿç™‚åŸç†ã€) ---

const RECIPES = {
  // --- æ—©é¤é¡ ---
  'b-millet': {
    name: 'é¤Šèƒƒå°ç±³ç´…ç³–ç²¥', type: 'æ—©é¤', time: '25 min',
    desc: 'æº«å’Œé¤Šèƒƒï¼Œé©åˆç¬¬ä¸€é€±è…¸èƒƒè •å‹•æ…¢æ™‚é£Ÿç”¨ã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘å°ç±³å…¥è„¾ã€èƒƒã€è…ç¶“ï¼Œæœ‰æ»‹é™°é¤Šè¡€ã€å¥è„¾å’ŒèƒƒåŠŸæ•ˆã€‚',
    ingredients: ['å°ç±³ 1/2æ¯ (Millet)', 'ç´…ç³– é©é‡', 'ç´…æ£— 3é¡†', 'æ¸æ å°‘è¨±'],
    steps: ['å°ç±³æ´—æ·¨ï¼ŒåŠ æ°´èˆ‡ç´…æ£—ç†¬ç…® 25 åˆ†é˜è‡³æ¿ƒç¨ ï¼ŒåŠ ç³–èª¿å‘³ã€‚'],
    tips: 'Burnaby Costco æœ‰è³£æœ‰æ©Ÿå°ç±³ã€‚ç¬¬ä¸€é€±å»ºè­°ç…®ç¨€ä¸€é» (æ°´:ç±³ = 12:1)ã€‚',
    substitutes: 'è²·ä¸åˆ°å°ç±³å¯ç”¨ã€Œå»çš®ç¶ è±†ã€æˆ–ã€Œç™½ç²¥ã€ä»£æ›¿ï¼Œä¸€æ¨£é¤Šèƒƒã€‚'
  },
  'b-fish-congee': {
    name: 'ç”Ÿæ»¾é­šç‰‡è–‘çµ²ç²¥', type: 'æ—©é¤', time: '20 min',
    desc: 'æ¸…æ·¡é®®ç¾ï¼Œé­šè‚‰è›‹ç™½è³ªç´°ç·»å¥½å¸æ”¶ã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘é­šè‚‰è£œè™›å‹ï¼Œè–‘çµ²æº«ä¸­æ•£å¯’ï¼Œæš–èƒƒå»è…¥ã€‚',
    ingredients: ['ç™½é£¯ 1ç¢—', 'é¯›é­š/é±¸é­šç‰‡ 100g', 'è–‘çµ²', 'è”¥èŠ±', 'ç™½èƒ¡æ¤’'],
    steps: ['ç™½é£¯åŠ æ°´ç…®æˆç²¥åº•ã€‚', 'é­šç‰‡ç”¨ç±³é…’æŠ“é†ƒã€‚', 'ç²¥æ»¾å¾Œé—œç«ï¼Œæ”¾å…¥é­šç‰‡åˆ©ç”¨é¤˜æº«ç‡™ç†Ÿã€‚'],
    tips: 'Costco çš„ Tilapia æˆ– Snapper éƒ½å¯ä»¥ç”¨ã€‚',
    substitutes: 'ä¸æ•¢åƒé­šå¯ç”¨ã€Œé›çµè‚‰ã€æˆ–ã€Œç˜¦è‚‰ç‰‡ã€ä»£æ›¿ã€‚'
  },
  'b-pancake': {
    name: 'é¦™è•‰ç‡•éº¥é¬†é¤…', type: 'æ—©é¤', time: '15 min',
    desc: 'ç„¡ç²‰é…æ–¹ï¼Œé«˜çº–ä½å¡ï¼Œç·©è§£ç”¢å¾Œä¾¿ç§˜ã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘ç‡•éº¥å¯Œå«è†³é£Ÿçº–ç¶­ï¼›é¦™è•‰å«é‰€ï¼Œå¹«åŠ©ä»£è¬æ°´è…«ã€‚',
    ingredients: ['ç†Ÿé€é¦™è•‰ 1æ ¹', 'é›è›‹ 2é¡†', 'ç‡•éº¥ç‰‡ 1/2æ¯', 'è‚‰æ¡‚ç²‰ (é¸ç”¨)'],
    steps: ['æ‰€æœ‰ææ–™æ”¾å…¥æœæ±æ©Ÿæ‰“æˆç³Šã€‚', 'å¹³åº•é‹æŠ¹å°‘è¨±æ²¹ï¼Œç…æˆå°åœ“é¤…ã€‚'],
    tips: 'é¦™è•‰è¶Šé»‘è¶Šç”œï¼Œå®Œå…¨ä¸ç”¨åŠ ç³–ã€‚',
    substitutes: 'ä¸å–œæ­¡é¦™è•‰å¯ç”¨ã€Œè’¸ç†Ÿçš„åœ°ç“œæ³¥ã€ä»£æ›¿ã€‚'
  },
  
  // --- ä¸»èœé¡ ---
  'm-sesame-chicken': {
    name: 'Instant Pot éº»æ²¹é›', type: 'ä¸»èœ', time: 'IP 25 min',
    desc: 'ç”¢å¾Œæº«è£œç¶“å…¸ï¼Œä¿ƒé€²å­å®®æ”¶ç¸®ã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘éº»æ²¹å¯Œå«ä¸é£½å’Œè„‚è‚ªé…¸èˆ‡ç¶­ç”Ÿç´ Eï¼›è€è–‘é©…å¯’ï¼›é›è‚‰è£œæ°£ã€‚',
    ingredients: ['å»éª¨é›è…¿è‚‰', 'è€è–‘ (å¤§é‡)', 'é»‘éº»æ²¹', 'ç±³é…’æ°´'],
    steps: ['IPé‹ç‚’é¦™è–‘ç‰‡èˆ‡é›è‚‰ã€‚', 'åŠ æ°´ç‡‰ç…® (Pressure Cook 8 min)ã€‚', 'èµ·é‹åŠ æ¸æã€‚'],
    tips: 'ç¬¬ä¸€é€±å‚·å£æœªç™’åˆå°‘æ”¾é…’ï¼Œæˆ–æ”¹ç”¨è‹¦èŒ¶æ²¹ã€‚',
    substitutes: 'ç‡¥ç†±é«”è³ªå¯ç”¨ã€ŒèŒ¶æ²¹ã€ä»£æ›¿éº»æ²¹ï¼›ä¸æ•¢å–é…’å¯ç”¨ã€Œé»‘è±†æ°´ã€ç‡‰é›ã€‚'
  },
  'm-pig-trotter': {
    name: 'èŠ±ç”Ÿç‡‰è±¬è…³', type: 'ä¸»èœ', time: 'IP 50 min',
    desc: 'ç™¼å¥¶è–å“ï¼Œè† è³ªè±å¯Œï¼Œå¹«åŠ©çš®è†šå½ˆæ€§æ¢å¾©ã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘èŠ±ç”Ÿæ‚…è„¾å’Œèƒƒã€æ½¤è‚ºåŒ–ç—°ã€æ»‹é¤Šèª¿æ°£ï¼›è±¬è…³è£œè¡€å¡«ç²¾ã€‚',
    ingredients: ['è±¬è…³ (å‰è…³/Hand)', 'èŠ±ç”Ÿ (éœ€æ³¡æ°´)', 'è–‘è”¥', 'é†¬æ²¹', 'å†°ç³–'],
    steps: ['è±¬è…³å·ç‡™æ´—æ·¨ã€‚', 'æ‰€æœ‰é£Ÿæå…¥IPé‹ï¼ŒMeat/Stew æ¨¡å¼ 40-50 åˆ†é˜ã€‚'],
    tips: 'å»ºè­°ç…®å¥½å†·è—éå¤œï¼Œåˆ®æ‰ä¸Šå±¤ç™½æ²¹å†åƒï¼Œæ¸…çˆ½ä¸å µå¥¶ã€‚',
    substitutes: 'ä¸æ•¢åƒè±¬è…³å¯ç”¨ã€Œé³³çˆª (é›è…³)ã€æˆ–ã€Œç‰›ç­‹ã€ä»£æ›¿ï¼Œä¸€æ¨£æœ‰è† è³ªã€‚'
  },
  'm-cod-steam': {
    name: 'æ¸…è’¸è”¥æ²¹é±ˆé­š', type: 'ä¸»èœ', time: '20 min',
    desc: 'DHA è±å¯Œï¼Œé€éæ¯ä¹³å¹«åŠ©å¯¶å¯¶è…¦éƒ¨ç™¼è‚²ã€‚',
    ingredients: ['é±ˆé­šç‰‡ (Cod)', 'è”¥çµ²', 'è–‘çµ²', 'è’¸é­šé†¬æ²¹', 'ç†±æ²¹'],
    steps: ['é­šç‰‡é‹ªè–‘çµ²è’¸ 10 åˆ†é˜ã€‚', 'å€’æ‰è…¥æ°´ã€‚', 'é‹ªè”¥çµ²ï¼Œæ·‹é†¬æ²¹èˆ‡ç†±æ²¹ã€‚'],
    tips: 'Costco Wild Pacific Cod æ˜¯é¦–é¸ã€‚',
    substitutes: 'å¯ç”¨ã€Œæ¯”ç›®é­š (Sole)ã€æˆ–ã€ŒçŸ³æ–‘é­šã€ä»£æ›¿ã€‚'
  },
  'm-liver': {
    name: 'è èœç‚’è±¬è‚', type: 'ä¸»èœ', time: '15 min',
    desc: 'è£œè¡€ä¹‹ç‹ï¼Œç”¢å¾Œç¬¬ä¸€é€±æ’æƒ¡éœ²å¿…åƒã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘è±¬è‚è£œè‚æ˜ç›®ã€é¤Šè¡€ï¼›è èœæ»‹é™°å¹³è‚ã€‚',
    ingredients: ['è±¬è‚ (åˆ‡ç‰‡)', 'è èœ', 'è–‘çµ² (å¤§é‡)', 'ç±³é…’'],
    steps: ['è±¬è‚ç”¨æµæ°´æ²–æ´— 15 åˆ†é˜å»è…¥ã€‚', 'æ»¾æ°´å·ç‡™ 20 ç§’æ’ˆèµ·ã€‚', 'çˆ†é¦™è–‘çµ²å¿«ç‚’è èœèˆ‡è±¬è‚ã€‚'],
    tips: 'è±¬è‚å‹¿ç…®å¤ªä¹…ï¼Œå£æ„Ÿæœƒè®Šç¡¬åƒæ©¡çš®ã€‚',
    substitutes: 'ä¸æ•¢åƒå…§è‡Ÿå¯ç”¨ã€Œç‰›è‚‰ç‰‡ã€æˆ–ã€Œæ·±ç¶ è‰²è”¬èœ(å¦‚ç´…è§èœ)ã€åŠ å¼·è£œéµã€‚'
  },
  
  // --- æ¹¯æ°´é¡ ---
  's-rice-tea': {
    name: 'é™³çš®ç‚’ç±³èŒ¶', type: 'ä»£è¬', time: '20 min',
    desc: 'ã€æœˆå­æ°´é¦–é¸ã€‘æš–èƒƒç¥›å¯’ï¼Œå»æ¿•æ°£ï¼Œç·©è§£ç”¢å¾Œèƒƒè„¹æ°£ã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘ç±³ç‚’éå¾Œæ¾±ç²‰è¢«ç ´å£ï¼Œè®Šæˆæ´»æ€§ç‚­å¯å¸é™„è…¸èƒƒé›œè³ªã€‚',
    ingredients: ['ç™½ç±³/ç´…ç±³ 1æ¯', 'é™³çš® 2ç‰‡ (åˆ®å»ç™½ç“¤)', 'æ°´ 1.5å…¬å‡'],
    steps: ['ç±³æ´—æ·¨ç€ä¹¾ï¼Œä¹¾é‹ç‚’è‡³é‡‘é»ƒå¾®ç„¦æœ‰é¦™å‘³ã€‚', 'æ”¾å…¥ä¿æº«ç“¶ï¼ŒåŠ é™³çš®æ²–ç†±æ°´æ‚¶ 20 åˆ†é˜ã€‚'],
    tips: 'ä¸€æ¬¡ç‚’ä¸€ç½ç±³ï¼Œéš¨å–éš¨æ³¡ï¼Œä»£æ›¿ç™½é–‹æ°´ã€‚',
    substitutes: 'ä¹Ÿå¯ç”¨ã€Œé»‘è±†ã€ç‚’éæ³¡èŒ¶ï¼ŒåŠŸæ•ˆé¡ä¼¼ä½†å¤šäº†è£œè…åŠŸèƒ½ã€‚'
  },
  's-fish-soup': {
    name: 'æœ¨ç“œé¯½é­šæ¹¯', type: 'ç™¼å¥¶', time: '40 min',
    desc: 'ç¶“å…¸ç™¼å¥¶æ¹¯ï¼Œæ¹¯è‰²å¥¶ç™½é®®ç”œã€‚',
    nutrition: 'ã€é£Ÿç™‚ã€‘é¯½é­šå¥è„¾åˆ©æ¿•ï¼Œå’Œä¸­é–‹èƒƒï¼Œæ´»è¡€é€šçµ¡ï¼Œæº«ä¸­ä¸‹æ°£ã€‚',
    ingredients: ['é¯½é­š 1æ¢', 'é’æœ¨ç“œ åŠé¡†', 'è–‘ç‰‡', 'ç†±æ°´ (é—œéµ)'],
    steps: ['é­šç…è‡³å…©é¢é‡‘é»ƒã€‚', 'å€’å…¥æ»¾ç‡™ç†±æ°´å¤§ç«ç…® 5 åˆ†é˜è‡³å¥¶ç™½ã€‚', 'åŠ æœ¨ç“œç‡‰ 20 åˆ†é˜ã€‚'],
    tips: 'è²·ä¸åˆ°é¯½é­šå¯ç”¨ Costco çƒ¤é›éª¨æ¶ç†¬æ¹¯ + é­šç‰‡ã€‚',
    substitutes: 'å¯ç”¨ã€Œé€šè‰ (ä¸­è—¥æ)ã€åŠ æ’éª¨ç…®æ¹¯ï¼Œä¹Ÿæœ‰é€šä¹³æ•ˆæœã€‚'
  },
  // ... ç‚ºäº†ç¯€çœç©ºé–“ï¼Œä¿ç•™å…¶ä»–æ—¢æœ‰é£Ÿè­œçµæ§‹ï¼Œä½†æ‚¨å¯ä»¥æƒ³åƒæ¯å€‹éƒ½å¢åŠ äº† nutrition å’Œ substitutes ...
  's-black-bean-tea': { name: 'é»‘è±†æ°´ (æ¶ˆæ°´è…«)', type: 'ç™¼å¥¶', time: '15 min', desc: 'æ¶ˆæ°´è…«åŒæ™‚ç™¼å¥¶ã€‚', ingredients: ['é’ä»é»‘è±†', 'æ°´'], steps: ['é»‘è±†ä¹¾ç‚’è£‚ï¼Œæ³¡ç†±æ°´é£²ç”¨ã€‚'], tips: 'é»‘è±†ä¸€å®šè¦ç‚’éã€‚' },
  's-miso': { name: 'é®®é­šè±†è…å‘³å™Œæ¹¯', type: 'ç™¼å¥¶', time: '20 min', desc: 'ç›Šç”ŸèŒåŠ©æ¶ˆåŒ–ã€‚', ingredients: ['é­šéª¨', 'å«©è±†è…', 'å‘³å™Œ'], steps: ['ç…®æ»¾é­šæ¹¯åŠ å‘³å™Œã€‚'], tips: 'å‘³å™Œå‹¿ä¹…ç…®ã€‚' },
  's-clam-chicken': { name: 'è›¤èœŠè’œé ­é›æ¹¯', type: 'ç™¼å¥¶', time: 'IP 30 min', desc: 'å¯Œå«é‹…ï¼Œå‘³é“æ¥µé®®ã€‚', ingredients: ['é›è…¿è‚‰', 'è›¤èœŠ', 'è’œé ­'], steps: ['é›è‚‰è’œé ­ç‡‰ç…®ï¼Œèµ·é‹æ”¾è›¤èœŠã€‚'], tips: 'ä¸éœ€åŠ é¹½ã€‚' },
  's-longan-chicken': { name: 'ç´…æ£—æ¡‚åœ“é›æ¹¯', type: 'è£œæ°£è¡€', time: 'IP 35 min', desc: 'æº«è£œå®‰ç¥ã€‚', ingredients: ['é›è…¿è‚‰', 'æ¡‚åœ“', 'ç´…æ£—'], steps: ['IP é‹ Soup æ¨¡å¼ã€‚'], tips: 'ç‡¥ç†±è€…æ¸›é‡ã€‚' },
  's-angelica-pork': { name: 'ç•¶æ­¸ç”Ÿè–‘è±¬éª¨æ¹¯', type: 'è£œæ°£è¡€', time: 'IP 40 min', desc: 'æš–å­å®®ï¼Œæ¢å¾©æ°£è‰²ã€‚', ingredients: ['æ’éª¨', 'ç•¶æ­¸', 'ç”Ÿè–‘'], steps: ['ç‡‰ç…®ã€‚'], tips: 'æ„Ÿå†’æš«åœã€‚' },
  's-siwu': { name: 'å››ç‰©é›æ¹¯', type: 'è£œæ°£è¡€', time: 'IP 40 min', desc: 'è£œè¡€èª¿ç¶“é»ƒé‡‘çµ„åˆã€‚', ingredients: ['å››ç‰©åŒ…', 'é›è‚‰', 'ç±³é…’'], steps: ['ç‡‰ç…®ã€‚'], tips: 'æƒ¡éœ²æ·¨å¾Œå–ã€‚' },
  's-beef-bone': { name: 'ç•ªèŒ„è”¬èœç‰›å°¾æ¹¯', type: 'è£œæ°£è¡€', time: 'IP 50 min', desc: 'éˆ£éµé›™è£œã€‚', ingredients: ['ç‰›å°¾', 'ç•ªèŒ„', 'æ´‹è”¥'], steps: ['IP ç‡‰ç…®è»Ÿçˆ›ã€‚'], tips: 'ç‰›å°¾è† è³ªè±å¯Œã€‚' },
  's-eucommia-kidney': { name: 'æœä»²è…°èŠ±æ¹¯', type: 'èª¿ç†', time: '20 min', desc: 'å°ˆæ²»è…°ç— ã€‚', ingredients: ['æœä»²', 'è±¬è…°/æ’éª¨', 'è–‘'], steps: ['æœä»²ç…®æ°´ï¼Œç‡™ç†Ÿè±¬è…°ã€‚'], tips: 'è±¬è…°å»ç­‹è†œã€‚' },
  's-yam-pork': { name: 'æ·®å±±æ’éª¨æ¹¯', type: 'èª¿ç†', time: 'IP 30 min', desc: 'å¥è„¾ç›Šèƒƒã€‚', ingredients: ['å±±è—¥', 'æ’éª¨', 'æ¸æ'], steps: ['ç‡‰ç…®ï¼Œå±±è—¥å¾Œæ”¾ã€‚'], tips: 'å±±è—¥åˆ‡å¤§å¡Šã€‚' },
  's-lotus-soup': { name: 'è“®è—•èŠ±ç”Ÿç« é­šæ¹¯', type: 'èª¿ç†', time: 'IP 45 min', desc: 'æ¸¯å¼è£œæ°£æ¹¯ã€‚', ingredients: ['è“®è—•', 'èŠ±ç”Ÿ', 'ç« é­šä¹¾'], steps: ['ç‡‰ç…®ã€‚'], tips: 'åŠ ç¶ è±†å»ç‡¥ã€‚' },
  's-silver-ear': { name: 'å†°ç³–éŠ€è€³è“®å­æ¹¯', type: 'ç”œé»', time: 'IP 25 min', desc: 'è† åŸè›‹ç™½ã€‚', ingredients: ['ç™½æœ¨è€³', 'è“®å­', 'å†°ç³–'], steps: ['ç‡‰ç…®å‡ºè† ã€‚'], tips: 'åˆ‡ç¢ã€‚' },
  's-red-bean': { name: 'é™³çš®ç´…è±†ç´«ç±³æ¹¯', type: 'ç”œé»', time: 'IP 30 min', desc: 'æ¶ˆæ°´è…«ã€‚', ingredients: ['ç´…è±†', 'ç´«ç±³', 'é™³çš®'], steps: ['Bean æ¨¡å¼ã€‚'], tips: 'é™³çš®å»ç™½ã€‚' },
  's-corn-ribs': { name: 'ç‰ç±³ç´…è˜¿è””æ’éª¨æ¹¯', type: 'èª¿ç†', time: 'IP 30 min', desc: 'æ¸…ç”œä¸æ²¹è†©ã€‚', ingredients: ['ç‰ç±³', 'ç´…è˜¿è””', 'æ’éª¨'], steps: ['ç‡‰ç…®ã€‚'], tips: 'ç‰ç±³èŠ¯ä¸€èµ·ç…®ã€‚' },
  's-sheng-hua': { name: 'ç”ŸåŒ–æ¹¯ (æ’æƒ¡éœ²)', type: 'ä»£è¬', time: '15 min', desc: 'å¹«åŠ©å­å®®æ”¶ç¸®ï¼Œæ’å‡ºæƒ¡éœ²ã€‚', ingredients: ['ç”ŸåŒ–æ¹¯è—¥åŒ…', 'ç±³é…’', 'æ°´'], steps: ['è—¥ææµ¸æ³¡ 20 åˆ†é˜ï¼Œå¤§ç«ç…®æ»¾è½‰å°ç«ç…è‡³ä¸€ç¢—ã€‚'], tips: 'è‡ªç„¶ç”¢å– 5-7 å¸–ï¼Œå‰–è…¹ç”¢è«‹è«®è©¢é†«å¸«ã€‚' },
  's-five-red': { name: 'é¤Šè¡€äº”ç´…æ¹¯', type: 'ä»£è¬', time: 'IP 25 min', desc: 'ã€è£œè¡€è–å“ã€‘äº”ç¨®ç´…è‰²é£ŸæåŒ¯èšã€‚', ingredients: ['ç´…è±†', 'ç´…è¡£èŠ±ç”Ÿ', 'ç´…æ£—', 'æ¸æ', 'ç´…ç³–'], steps: ['IP é‹ Bean/Soup æ¨¡å¼ 25 åˆ†é˜ã€‚'], tips: 'èŠ±ç”Ÿè¦è²·å¸¶ç´…çš®çš„ã€‚' },
  's-papaya-ribs': { name: 'é’æœ¨ç“œèŠ±ç”Ÿæ’éª¨æ¹¯', type: 'ç™¼å¥¶', time: 'IP 35 min', desc: 'è† è³ªè±å¯Œç™¼å¥¶æ¹¯ã€‚', ingredients: ['é’æœ¨ç“œ', 'æ’éª¨', 'èŠ±ç”Ÿ'], steps: ['IP é‹ Soup æ¨¡å¼ã€‚'], tips: 'é’æœ¨ç“œå«å‡ä¹³é…¶ã€‚' },
  'b-oats': { name: 'é»‘èŠéº»å …æœç‡•éº¥ç²¥', type: 'æ—©é¤', time: '12 min', desc: 'é«˜çº–é«˜éˆ£ã€‚', ingredients: ['ç‡•éº¥', 'ç‰›å¥¶', 'èŠéº»ç²‰'], steps: ['ç…®è»Ÿã€‚'], tips: 'Quaker Oatsã€‚' },
  'b-sandwich': { name: 'é›è‚‰é…ªæ¢¨ä¸‰æ˜æ²»', type: 'æ—©é¤', time: '15 min', desc: 'å„ªè³ªæ²¹è„‚ã€‚', ingredients: ['åå¸', 'é›è‚‰', 'é…ªæ¢¨'], steps: ['çµ„è£ã€‚'], tips: 'é…ªæ¢¨ç†Ÿè»Ÿã€‚' },
  'b-pumpkin': { name: 'å—ç“œè‚‰æœ«ç²¥', type: 'æ—©é¤', time: '40 min', desc: 'è£œæ°£ã€‚', ingredients: ['å—ç“œ', 'çµè‚‰', 'ç±³'], steps: ['ç†¬ç²¥ã€‚'], tips: 'é€£çš®ç…®ã€‚' },
  'b-corn-chicken': { name: 'ç‰ç±³é›èŒ¸ç²¥', type: 'æ—©é¤', time: '20 min', desc: 'æ¸…ç”œã€‚', ingredients: ['ç‰ç±³', 'é›çµè‚‰', 'è›‹'], steps: ['ç…®æ»¾æ‰“è›‹èŠ±ã€‚'], tips: 'æœ‰æ©Ÿç‰ç±³ç½é ­ã€‚' },
  'b-steamed-bun': { name: 'çˆ†æ¼¿é»‘ç³–é¥…é ­å¤¾è›‹', type: 'æ—©é¤', time: '10 min', desc: 'æ–¹ä¾¿å¿«é€Ÿã€‚', ingredients: ['é¥…é ­', 'è›‹', 'è”¥'], steps: ['è’¸é¥…é ­ç…è›‹ã€‚'], tips: 'T&T é¥…é ­ã€‚' },
  'b-yogurt': { name: 'å¸Œè‡˜å„ªæ ¼å …æœæ¯', type: 'æ—©é¤', time: '5 min', desc: 'ç›Šç”ŸèŒã€‚', ingredients: ['å„ªæ ¼', 'èœ‚èœœ', 'å …æœ'], steps: ['æ··åˆã€‚'], tips: 'ç„¡ç³–å„ªæ ¼ã€‚' },
  'm-mushroom-chicken': { name: 'é¦™è‡æ»‘é› (è’¸)', type: 'ä¸»èœ', time: '25 min', desc: 'æ¸…æ·¡æ»‘å«©ã€‚', ingredients: ['é›è‚‰', 'é¦™è‡', 'å¤ªç™½ç²‰'], steps: ['é†ƒè£½è’¸ç†Ÿã€‚'], tips: 'å¤ªç™½ç²‰é—œéµã€‚' },
  'm-chestnut-chicken': { name: 'æ —å­ç‡’é›', type: 'ä¸»èœ', time: 'IP 30 min', desc: 'è£œè…ã€‚', ingredients: ['é›è‚‰', 'æ —å­', 'é†¬æ²¹'], steps: ['IP ç‡’ç…®ã€‚'], tips: 'å†·å‡æ —å­ã€‚' },
  'm-lemon-chicken': { name: 'é¦™ç…æª¸æª¬é›æ’', type: 'ä¸»èœ', time: '15 min', desc: 'é–‹èƒƒã€‚', ingredients: ['é›æ’', 'æª¸æª¬'], steps: ['ä¹¾ç…æ·‹æ±ã€‚'], tips: 'åŠ èœ‚èœœã€‚' },
  'm-steamed-ribs': { name: 'ç²‰è’¸æ’éª¨', type: 'ä¸»èœ', time: '40 min', desc: 'å…¥å‘³ã€‚', ingredients: ['æ’éª¨', 'è’¸è‚‰ç²‰', 'åœ°ç“œ'], steps: ['è£¹ç²‰è’¸ã€‚'], tips: 'åœ°ç“œå¢Šåº•ã€‚' },
  'm-pork-snap': { name: 'ç”œè±†ç‚’è‚‰ç‰‡', type: 'ä¸»èœ', time: '15 min', desc: 'æ¸…çˆ½ã€‚', ingredients: ['è‚‰ç‰‡', 'ç”œè±†', 'è’œ'], steps: ['å¿«ç‚’ã€‚'], tips: 'Snap Peasã€‚' },
  'm-salmon': { name: 'é¦™ç…æª¸æª¬é®­é­š', type: 'ä¸»èœ', time: '15 min', desc: 'Omega-3ã€‚', ingredients: ['é®­é­š', 'æª¸æª¬'], steps: ['ä¹¾ç…ã€‚'], tips: 'å¸¶çš®ã€‚' },
  'm-miso-cod': { name: 'æ—¥å¼å‘³å™Œçƒ¤é­š', type: 'ä¸»èœ', time: '25 min', desc: 'ä¸‹é£¯ã€‚', ingredients: ['é±ˆé­š', 'å‘³å™Œ', 'å‘³é†‚'], steps: ['é†ƒçƒ¤ã€‚'], tips: 'é‹ªéŒ«ç®”ç´™ã€‚' },
  'm-shrimp-asparagus': { name: 'è˜†ç­ç‚’è¦ä»', type: 'ä¸»èœ', time: '15 min', desc: 'ä½è„‚ã€‚', ingredients: ['è¦ä»', 'è˜†ç­'], steps: ['å¿«ç‚’ã€‚'], tips: 'å‹¿ä¹…ç…®ã€‚' },
  'm-scallop-chicken': { name: 'å¹²è²é¦™è‡é›æ¹¯(è‚‰)', type: 'ä¸»èœ', time: 'ç‡‰ç…®', desc: 'é®®ç¾ã€‚', ingredients: ['å¹²è²', 'é›è‚‰', 'é¦™è‡'], steps: ['ç‡‰ç…®ã€‚'], tips: 'å¤©ç„¶å‘³ç²¾ã€‚' },
  'm-beef-stew': { name: 'ç•ªèŒ„é¦¬éˆ´è–¯ç‡‰ç‰›è…±', type: 'ä¸»èœ', time: 'IP 45 min', desc: 'è£œéµã€‚', ingredients: ['ç‰›è…±', 'ç•ªèŒ„', 'é¦¬éˆ´è–¯'], steps: ['IP ç‡‰ç…®ã€‚'], tips: 'å¤šç…®é»ã€‚' },
  'm-lamb-stew': { name: 'ç´…ç‡’ç¾Šè‚‰çˆ', type: 'ä¸»èœ', time: 'IP 50 min', desc: 'æº«è£œã€‚', ingredients: ['ç¾Šè‚‰', 'è˜¿è””', 'è±†ç“£é†¬'], steps: ['ç´…ç‡’ã€‚'], tips: 'è˜¿è””å»ç¾¶ã€‚' },
  'm-beef-broccoli': { name: 'è ”æ²¹ç‰›è‚‰ç‚’è¥¿è˜­èŠ±', type: 'ä¸»èœ', time: '15 min', desc: 'è£œéµã€‚', ingredients: ['ç‰›è‚‰', 'è¥¿è˜­èŠ±', 'è ”æ²¹'], steps: ['å¿«ç‚’ã€‚'], tips: 'å¤§ç«ã€‚' },
  'm-tofu-minced': { name: 'è‚‰æœ«ç‡’è±†è…', type: 'ä¸»èœ', time: '20 min', desc: 'éˆ£è³ªã€‚', ingredients: ['è±†è…', 'çµè‚‰'], steps: ['ç‡’ç…®ã€‚'], tips: 'æ¿è±†è…ã€‚' },
  'm-steamed-egg': { name: 'è›¤èœŠè’¸è›‹', type: 'ä¸»èœ', time: '15 min', desc: 'æ»‘å«©ã€‚', ingredients: ['è›‹', 'è›¤èœŠ'], steps: ['è’¸ç†Ÿã€‚'], tips: 'æ¯”ä¾‹1:2ã€‚' },
  'v-spinach': { name: 'éº»æ²¹æ¸æç‡™è èœ', time: '5 min' },
  'v-cabbage': { name: 'æ«»èŠ±è¦ç‚’é«˜éº—èœ', time: '8 min' },
  'v-broccoli': { name: 'è’œç‚’è¥¿è˜­èŠ±', time: '10 min' },
  'v-asparagus': { name: 'æ¸…ç‚’è˜†ç­ç§€çè‡', time: '8 min' },
  'v-bokchoy': { name: 'è ”æ²¹æ·‹é’æ±Ÿèœ', time: '5 min' },
  'v-zucchini': { name: 'ä¹¾ç…æ«›ç“œ', time: '10 min' },
  'v-green-bean': { name: 'è’œæœ«ç‚’å››å­£è±†', time: '12 min' },
  'v-mushroom': { name: 'å¥¶æ²¹é»‘èƒ¡æ¤’ç‚’è‡', time: '10 min' },
  'v-eggplant': { name: 'å¡”é¦™èŒ„å­', time: '15 min' },
  'v-cauliflower': { name: 'ç•ªèŒ„ç‚’ç™½èŠ±æ¤°', time: '15 min' },
  'v-kale': { name: 'è’œç‚’ç¾½è¡£ç”˜è—', time: '10 min' },
  'v-lotus': { name: 'æ¸…ç‚’è“®è—•ç‰‡', time: '10 min' },
  'r-plain': { name: 'ç™½é£¯/ç³™ç±³é£¯' },
  'r-quinoa': { name: 'ç´…è—œéº¥é£¯' },
  'r-purple': { name: 'è£œè¡€ç´«ç±³é£¯' },
  'r-pumpkin': { name: 'é»ƒé‡‘å—ç“œç‚Šé£¯' },
  'r-corn': { name: 'ç‰ç±³ç‚Šé£¯' }
};

// --- 3. æ¡è²·æ¸…å–® (è©³ç´°ç‰ˆ) ---
const WEEKLY_LISTS = {
  1: {
    focus: "æ’æ·¨æƒ¡éœ² & å‚·å£ç™’åˆ",
    categories: {
      "ğŸ¥© è‚‰é¡/æµ·é®®": ["è±¬è‚ (T&T ç›’è£, å»ºè­°è²· 2-3 ç›’)", "å†·å‡é±ˆé­šç‰‡ (Costco Wild Pacific Cod)", "ç‰›è…± (Beef Shank)", "é¯›é­šç‰‡ (ç²¥ç”¨)", "é›çµè‚‰", "æ’éª¨"],
      "ğŸ¥¬ è”¬èœ/æ°´æœ": ["è èœ (Costco æœ‰æ©Ÿå¤§åŒ…)", "é«˜éº—èœ", "è¥¿è˜­èŠ±", "è€è–‘ (å¤§é‡)", "è”¥"],
      "ğŸ’Š è—¥è†³/ä¹¾è²¨": ["ç”ŸåŒ–æ¹¯è—¥åŒ… (5-7å¸–)", "å°ç±³ (Millet)", "ç´…ç³–", "é™³çš®", "ç™½ç±³/ç³™ç±³"],
      "ğŸ¥› å…¶ä»–": ["é›è›‹", "ç±³é…’æ°´ (ç´…æ¨™)", "è‹¦èŒ¶æ²¹ (åˆæœŸæ›¿ä»£éº»æ²¹)"]
    }
  },
  2: {
    focus: "å‚¬ä¹³ç™¼å¥¶ & æ”¶ç¸®å­å®®",
    categories: {
      "ğŸ¥© è‚‰é¡/æµ·é®®": ["è±¬è…³ (T&T å‰è…³)", "å»éª¨é›è…¿è‚‰ (Costco)", "å¸¶çš®é®­é­š (Salmon)", "é¯½é­š (éº—æ™¶)", "è›¤èœŠ"],
      "ğŸ¥¬ è”¬èœ/æ°´æœ": ["é’æœ¨ç“œ (Green Papaya)", "è˜†ç­", "ç”œè±†", "å››å­£è±†", "è‡é¡"],
      "ğŸ’Š è—¥è†³/ä¹¾è²¨": ["é»‘éº»æ²¹ (é«˜ç´”åº¦)", "æœä»²", "é’ä»é»‘è±†", "ç”ŸèŠ±ç”Ÿ", "ç´…è—œéº¥"],
      "ğŸ¥› å…¶ä»–": ["ç”œé…’é‡€", "ç„¡ç³–è±†æ¼¿", "å‘³å™Œ"]
    }
  },
  3: {
    focus: "æ»‹è£œæ°£è¡€ & å¼·å¥ç­‹éª¨",
    categories: {
      "ğŸ¥© è‚‰é¡/æµ·é®®": ["ç¾Šè‚‰ (Lamb Stew)", "é›è…¿è‚‰", "ç‰›å°¾/ç‰›éª¨", "è¦ä»", "è±¬è…° (é¸ç”¨)"],
      "ğŸ¥¬ è”¬èœ/æ°´æœ": ["é’æ±Ÿèœ", "ç´…/ç™½è˜¿è””", "æ—¥æœ¬å±±è—¥ (Nagaimo)", "èŒ„å­", "è“®è—•"],
      "ğŸ’Š è—¥è†³/ä¹¾è²¨": ["å››ç‰©åŒ…", "ä¹¾å¹²è²", "ä¹¾é¦™è‡", "ç´…æ£— & æ¸æ", "æ¡‚åœ“è‚‰"],
      "ğŸ¥› å…¶ä»–": ["ç´«ç±³", "èŠéº»ç²‰", "ä¹¾ç™½æœ¨è€³"]
    }
  },
  4: {
    focus: "å›æ˜¥é«”åŠ› & è† åŸè›‹ç™½",
    categories: {
      "ğŸ¥© è‚‰é¡/æµ·é®®": ["å…¨é›/çƒéª¨é›", "å„å¼é­šé¡", "è±¬é‡Œè‚Œ", "é›èƒ¸è‚‰"],
      "ğŸ¥¬ è”¬èœ/æ°´æœ": ["ç¾½è¡£ç”˜è— (Kale)", "æ«›ç“œ (Zucchini)", "ç™½èŠ±æ¤°", "ç”œç‰ç±³", "é…ªæ¢¨"],
      "ğŸ’Š è—¥è†³/ä¹¾è²¨": ["åå…¨å¤§è£œæ¹¯åŒ…", "è“®å­", "ç„¡èŠ±æœä¹¾"],
      "ğŸ¥› å…¶ä»–": ["å¸Œè‡˜å„ªæ ¼", "é¬†é¤…ç²‰", "é®®å¥¶"]
    }
  }
};

// --- æ’ç¨‹é‚è¼¯ ---
const generateSchedule = () => {
  const schedule = {};
  // å®šç¾©æ¯é€±èœè‰²æ±  (Pools) - ç°¡åŒ–ç‰ˆä»¥ç¯€çœç©ºé–“ï¼Œé‚è¼¯èˆ‡ä¹‹å‰ç›¸åŒ
  const pools = {
    w1: { b: ['b-millet', 'b-fish-congee', 'b-oats', 'b-steamed-bun', 'b-millet', 'b-fish-congee', 'b-oats'], l_main: ['m-cod-steam', 'm-liver', 'm-mushroom-chicken', 'm-steamed-egg', 'm-cod-steam', 'm-liver', 'm-pork-snap'], d_main: ['m-beef-stew', 'm-steamed-ribs', 'm-scallop-chicken', 'm-lemon-chicken', 'm-beef-broccoli', 's-fish-soup', 'm-steamed-egg'], sides: ['v-spinach', 'v-cabbage', 'v-zucchini', 'v-lotus', 'v-bokchoy', 'v-spinach', 'v-cabbage'] },
    w2: { b: ['b-pumpkin', 'b-sandwich', 'b-pancake', 'b-corn-chicken', 'b-pumpkin', 'b-yogurt', 'b-sandwich'], l_main: ['m-sesame-chicken', 'm-pig-trotter', 'm-shrimp-asparagus', 'm-sesame-chicken', 'm-tofu-minced', 'm-salmon', 'm-pig-trotter'], d_main: ['m-salmon', 'm-chestnut-chicken', 'm-beef-broccoli', 'm-pig-trotter', 'm-miso-cod', 'm-sesame-chicken', 'm-shrimp-asparagus'], sides: ['v-asparagus', 'v-broccoli', 'v-green-bean', 'v-mushroom', 'v-kale', 'v-asparagus', 'v-eggplant'] },
    w3: { b: ['b-steamed-bun', 'b-millet', 'b-pancake', 'b-fish-congee', 'b-oats', 'b-steamed-bun', 'b-sandwich'], l_main: ['m-lamb-stew', 'm-scallop-chicken', 'm-beef-stew', 'm-steamed-ribs', 'm-lamb-stew', 'm-lemon-chicken', 'm-beef-stew'], d_main: ['m-sesame-chicken', 'm-miso-cod', 'm-tofu-minced', 'm-salmon', 'm-chestnut-chicken', 'm-beef-broccoli', 'm-lamb-stew'], sides: ['v-bokchoy', 'v-cauliflower', 'v-lotus', 'v-green-bean', 'v-spinach', 'v-zucchini', 'v-mushroom'] },
    w4: { b: ['b-yogurt', 'b-corn-chicken', 'b-pancake', 'b-sandwich', 'b-fish-congee', 'b-pumpkin', 'b-steamed-bun'], l_main: ['m-chestnut-chicken', 'm-pork-snap', 'm-shrimp-asparagus', 'm-lamb-stew', 'm-scallop-chicken', 'm-steamed-egg', 'm-beef-stew'], d_main: ['m-miso-cod', 'm-sesame-chicken', 'm-steamed-ribs', 'm-tofu-minced', 'm-salmon', 'm-lemon-chicken', 'm-pig-trotter'], sides: ['v-kale', 'v-eggplant', 'v-cauliflower', 'v-asparagus', 'v-broccoli', 'v-green-bean', 'v-cabbage'] }
  };

  const assignDay = (day, phasePool, dayIndex) => {
    const idx = dayIndex % 7;
    const starches = ['r-plain', 'r-quinoa', 'r-purple', 'r-pumpkin', 'r-corn'];
    let tea;
    if (day <= 7) tea = (day <= 3) ? 's-rice-tea' : (day <= 5 ? 's-sheng-hua' : 's-five-red');
    else if (day <= 14) tea = (day % 2 === 0) ? 's-black-bean-tea' : 's-papaya-ribs';
    else if (day <= 21) tea = ['s-longan-chicken', 's-angelica-pork', 's-silver-ear', 's-clam-chicken'][day % 4];
    else tea = ['s-siwu', 's-miso', 's-red-bean', 's-beef-bone'][day % 4];

    schedule[day] = {
      breakfast: phasePool.b[idx],
      lunch: [phasePool.l_main[idx], phasePool.sides[idx], starches[day % 5]],
      tea: tea,
      dinner: [phasePool.d_main[idx], phasePool.sides[(idx + 3) % 7], starches[(day + 2) % 5]]
    };
  };

  for (let i = 1; i <= 28; i++) {
    if (i <= 7) assignDay(i, pools.w1, i - 1);
    else if (i <= 14) assignDay(i, pools.w2, i - 8);
    else if (i <= 21) assignDay(i, pools.w3, i - 15);
    else assignDay(i, pools.w4, i - 22);
  }
  return schedule;
};

const SCHEDULE = generateSchedule();

// --- çµ„ä»¶: æ™ºæ…§å–æ°´è¿½è¹¤å™¨ (å‡ç´šç‰ˆ) ---
const HydrationTracker = () => {
  const [counts, setCounts] = useState({ water: 0, soup: 0, tea: 0 });
  const goals = { water: 1500, soup: 600, tea: 600 }; // ml
  const totalML = counts.water * 250 + counts.soup * 300 + counts.tea * 300;
  const totalGoal = 2700;
  const progress = Math.min(100, (totalML / totalGoal) * 100);

  const updateCount = (type, delta) => {
    setCounts(prev => ({ ...prev, [type]: Math.max(0, prev[type] + delta) }));
  };

  return (
    <div className="bg-white border border-cyan-100 rounded-2xl p-4 mb-6 shadow-sm">
      <div className="flex justify-between items-end mb-3">
        <div>
          <h3 className="text-sm font-bold text-cyan-900 flex items-center gap-2">
            <Droplet size={18} className="text-cyan-500" fill="currentColor" /> 
            æ™ºæ…§å–æ°´ç®¡å®¶
          </h3>
          <p className="text-xs text-cyan-600 mt-1">ç›®æ¨™ï¼š2700ml (å“ºä¹³æœŸéœ€æ±‚å¢åŠ )</p>
        </div>
        <div className="text-right">
          <span className="text-2xl font-bold text-cyan-700">{totalML}</span>
          <span className="text-xs text-gray-400"> / {totalGoal} ml</span>
        </div>
      </div>
      
      {/* Progress Bar */}
      <div className="h-2 bg-gray-100 rounded-full mb-4 overflow-hidden">
        <div className="h-full bg-gradient-to-r from-cyan-300 to-blue-500 transition-all duration-500" style={{ width: `${progress}%` }}></div>
      </div>

      <div className="grid grid-cols-3 gap-3">
        {[
          { id: 'water', label: 'æ°´/é»‘è±†æ°´', vol: '250ml', color: 'bg-blue-50 text-blue-700' },
          { id: 'soup', label: 'ç‡‰æ¹¯/é­šæ¹¯', vol: '300ml', color: 'bg-orange-50 text-orange-700' },
          { id: 'tea', label: 'ä»£èŒ¶/è—¥è†³', vol: '300ml', color: 'bg-purple-50 text-purple-700' }
        ].map(item => (
          <div key={item.id} className={`rounded-xl p-2 flex flex-col items-center ${item.color}`}>
            <span className="text-[10px] opacity-80 mb-1">{item.label}</span>
            <div className="flex items-center gap-2 bg-white/60 rounded-lg px-2 py-1">
              <button onClick={() => updateCount(item.id, -1)}><Minus size={14}/></button>
              <span className="font-bold w-4 text-center text-sm">{counts[item.id]}</span>
              <button onClick={() => updateCount(item.id, 1)}><Plus size={14}/></button>
            </div>
            <span className="text-[9px] mt-1 opacity-60">{item.vol}/æ¯</span>
          </div>
        ))}
      </div>
    </div>
  );
};

// --- çµ„ä»¶: æ¯æ—¥è­·ç†æŒ‡å—å¡ç‰‡ ---
const DailyWellnessCard = ({ day }) => {
  const info = DAILY_GUIDANCE[day] || DAILY_GUIDANCE.default;
  return (
    <div className="bg-rose-50 border border-rose-100 rounded-2xl p-4 mb-6 relative overflow-hidden">
      <div className="absolute top-0 right-0 -mt-2 -mr-2 w-16 h-16 bg-rose-100 rounded-full opacity-50 blur-xl"></div>
      <div className="relative z-10">
        <div className="flex items-center gap-2 mb-2">
          <HeartPulse size={18} className="text-rose-500" />
          <h3 className="font-bold text-rose-900 text-sm">Day {day}ï¼š{info.title}</h3>
        </div>
        <p className="text-xs text-rose-800 leading-relaxed mb-3">{info.body}</p>
        {info.warning && (
          <div className="flex items-start gap-2 bg-white/60 rounded-lg p-2 text-xs text-red-600">
            <AlertCircle size={14} className="shrink-0 mt-0.5" />
            <span>{info.warning}</span>
          </div>
        )}
      </div>
    </div>
  );
};

// --- çµ„ä»¶: é¤é»å¡ç‰‡ ---
const MealBlock = ({ type, recipeIds, onClick }) => {
  const isSet = Array.isArray(recipeIds);
  const mainRecipeId = isSet ? recipeIds[0] : recipeIds;
  const mainRecipe = RECIPES[mainRecipeId];
  
  if (!mainRecipe) return <div className="p-4 bg-gray-100 rounded text-xs text-gray-500">æ›´æ–°ä¸­...</div>;

  const typeData = {
    breakfast: { label: 'æ—©é¤', icon: <Coffee size={16}/>, color: 'bg-amber-50 border-amber-100 text-amber-900' },
    lunch: { label: 'åˆé¤', icon: <Utensils size={16}/>, color: 'bg-orange-50 border-orange-100 text-orange-900' },
    tea: { label: 'æ¹¯æ°´', icon: <Droplet size={16}/>, color: 'bg-cyan-50 border-cyan-100 text-cyan-900' },
    dinner: { label: 'æ™šé¤', icon: <Moon size={16}/>, color: 'bg-indigo-50 border-indigo-100 text-indigo-900' }
  }[type];

  return (
    <button 
      onClick={() => onClick(isSet ? recipeIds : [mainRecipeId])}
      className={`w-full text-left p-3 md:p-4 rounded-xl border flex flex-col gap-2 transition-all hover:shadow-md ${typeData.color} hover:brightness-95 h-full`}
    >
      <div className="flex items-center justify-between opacity-70">
        <div className="flex items-center gap-1.5 text-xs font-bold uppercase tracking-wide">
          {typeData.icon} {typeData.label}
        </div>
        {isSet && <span className="text-[10px] bg-white/60 px-1.5 py-0.5 rounded text-gray-600 font-medium">3å“</span>}
      </div>
      <div className="font-bold text-base leading-tight line-clamp-2">{mainRecipe.name}</div>
      {mainRecipe.type && type === 'tea' && (
         <span className={`self-start text-[10px] px-2 py-0.5 rounded-full font-bold bg-white/60 opacity-80`}>{mainRecipe.type}</span>
      )}
      {isSet && (
        <div className="text-xs opacity-80 space-y-1 mt-1">
          {recipeIds.slice(1).map(id => RECIPES[id] && (
            <div key={id} className="flex items-center gap-1 truncate">
              <span className="w-1 h-1 bg-current rounded-full shrink-0"></span>
              {RECIPES[id].name}
            </div>
          ))}
        </div>
      )}
    </button>
  );
};

// --- çµ„ä»¶: æ¹¯æ°´å¡ç‰‡ ---
const SoupCard = ({ recipeId, onClick }) => {
  const recipe = RECIPES[recipeId];
  return (
    <button 
      onClick={() => onClick([recipeId])}
      className="bg-white p-4 rounded-xl border border-cyan-100 shadow-sm hover:shadow-md hover:border-cyan-300 transition-all text-left flex flex-col h-full"
    >
      <div className="flex justify-between items-start mb-2">
        <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold 
          ${recipe.type === 'ä»£è¬' ? 'bg-green-100 text-green-700' : 
            recipe.type === 'ç™¼å¥¶' ? 'bg-blue-100 text-blue-700' :
            recipe.type === 'è£œæ°£è¡€' ? 'bg-red-100 text-red-700' : 'bg-gray-100 text-gray-600'}`}>
          {recipe.type}
        </span>
        <span className="text-xs text-gray-400 flex items-center gap-1"><Clock size={10}/> {recipe.time}</span>
      </div>
      <h3 className="font-bold text-gray-800 mb-1">{recipe.name}</h3>
      <p className="text-xs text-gray-500 line-clamp-2 mb-2">{recipe.desc}</p>
      <div className="mt-auto text-xs text-cyan-600 font-medium flex items-center gap-1">
        è©³ç´°é£Ÿè­œ <ChevronRight size={12}/>
      </div>
    </button>
  );
};

// --- çµ„ä»¶: é£Ÿè­œè©³æƒ…è¦–çª— (å¢å¼·ç‰ˆ) ---
const RecipeModal = ({ recipeIds, onClose }) => {
  if (!recipeIds) return null;
  const recipes = recipeIds.map(id => RECIPES[id]).filter(Boolean);

  return (
    <div className="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in zoom-in-95 duration-200">
      <div className="bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl flex flex-col">
        <div className="bg-white border-b p-4 flex justify-between items-center z-10 shrink-0">
          <div>
            <h2 className="text-xl font-bold text-gray-800">
              {recipes.length > 1 ? 'ğŸ± å¥—é¤è©³ç´°é£Ÿè­œ' : recipes[0].name}
            </h2>
            {recipes.length > 1 && <p className="text-xs text-gray-500 mt-1">æœ¬é¤åŒ…å«ï¼š{recipes.map(r => r.name).join(' + ')}</p>}
          </div>
          <button onClick={onClose} className="p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition"><X size={20}/></button>
        </div>
        
        <div className="overflow-y-auto p-0 bg-gray-50">
          <div className="divide-y divide-gray-200">
            {recipes.map((meal, index) => (
              <div key={index} className="p-5 md:p-6 bg-white mb-2 last:mb-0">
                <div className="flex items-center gap-3 mb-3">
                   <span className="px-2 py-1 bg-gray-100 rounded text-xs font-bold text-gray-600">{meal.type || 'é…èœ'}</span>
                   <h3 className="text-lg font-bold text-gray-900">{meal.name}</h3>
                   <span className="ml-auto flex items-center gap-1 text-xs text-gray-500"><Clock size={12} /> {meal.time}</span>
                </div>

                <p className="text-sm text-gray-600 mb-4">{meal.desc}</p>

                {/* é£Ÿç™‚åŸç†å€å¡Š (æ–°åŠŸèƒ½) */}
                {meal.nutrition && (
                  <div className="bg-blue-50 p-3 rounded-lg mb-4 text-xs text-blue-800 border border-blue-100 flex gap-2 items-start">
                    <HeartPulse size={14} className="shrink-0 mt-0.5" />
                    <span>{meal.nutrition}</span>
                  </div>
                )}

                <div className="grid md:grid-cols-2 gap-6">
                  <div>
                    <h4 className="font-bold text-gray-800 mb-2 flex items-center gap-2 text-sm border-b pb-1">
                      <Utensils size={14} className="text-rose-500" /> é£Ÿæ
                    </h4>
                    <ul className="space-y-1">
                      {meal.ingredients?.map((ing, i) => (
                        <li key={i} className="flex items-start gap-2 text-sm text-gray-700">
                          <span className="w-1 h-1 mt-2 rounded-full bg-rose-400 shrink-0" />
                          {ing}
                        </li>
                      ))}
                    </ul>
                  </div>
                  <div>
                    <h4 className="font-bold text-gray-800 mb-2 flex items-center gap-2 text-sm border-b pb-1">
                      <ChefHat size={14} className="text-rose-500" /> æ­¥é©Ÿ
                    </h4>
                    <ol className="space-y-2">
                      {meal.steps?.map((step, i) => (
                        <li key={i} className="flex gap-2 text-sm text-gray-700">
                          <span className="font-bold text-rose-600 text-xs mt-0.5">{i + 1}.</span>
                          <span>{step}</span>
                        </li>
                      ))}
                    </ol>
                  </div>
                </div>
                
                <div className="mt-4 space-y-2">
                  {meal.tips && (
                    <div className="bg-amber-50 p-3 rounded text-xs text-amber-800 flex gap-2 items-start">
                      <Info size={14} className="shrink-0 mt-0.5"/>
                      <span><b>Tips:</b> {meal.tips}</span>
                    </div>
                  )}
                  {/* æ›¿æ›å»ºè­° (æ–°åŠŸèƒ½) */}
                  {meal.substitutes && (
                    <div className="bg-gray-100 p-3 rounded text-xs text-gray-700 flex gap-2 items-start">
                      <HelpCircle size={14} className="shrink-0 mt-0.5"/>
                      <span><b>æ›¿æ›:</b> {meal.substitutes}</span>
                    </div>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

// --- ä¸»ç¨‹å¼ ---
export default function App() {
  const [currentDay, setCurrentDay] = useState(1);
  const [selectedRecipeIds, setSelectedRecipeIds] = useState(null);
  const [view, setView] = useState('calendar'); 
  const [shoppingTab, setShoppingTab] = useState('locations'); 

  const currentWeek = Math.ceil(currentDay / 7);
  const dayData = SCHEDULE[currentDay];

  const weekInfo = {
    1: { title: "ç¬¬ä¸€é€±ï¼šæ’æ·¨èˆ‡ä¿®å¾©", color: "bg-amber-100 text-amber-800 border-amber-200" },
    2: { title: "ç¬¬äºŒé€±ï¼šå‚¬ä¹³èˆ‡èª¿ç†", color: "bg-rose-100 text-rose-800 border-rose-200" },
    3: { title: "ç¬¬ä¸‰é€±ï¼šæ»‹è£œèˆ‡é¤Šæ°£", color: "bg-purple-100 text-purple-800 border-purple-200" },
    4: { title: "ç¬¬å››é€±ï¼šå›æ˜¥èˆ‡é«”åŠ›", color: "bg-indigo-100 text-indigo-800 border-indigo-200" }
  };

  const soupCategories = {
    'ä»£è¬æ’æ¯’': ['s-rice-tea', 's-sheng-hua', 's-five-red'],
    'å‚¬ä¹³ç™¼å¥¶': ['s-fish-soup', 's-papaya-ribs', 's-black-bean-tea', 's-miso', 's-clam-chicken'],
    'æ°£è¡€å¤§è£œ': ['s-longan-chicken', 's-angelica-pork', 's-siwu', 's-beef-bone'],
    'èª¿ç†èˆ‡ç”œå“': ['s-eucommia-kidney', 's-yam-pork', 's-lotus-soup', 's-corn-ribs', 's-silver-ear', 's-red-bean']
  };

  return (
    <div className="min-h-screen bg-gray-50 text-gray-800 font-sans pb-20">
      <header className="bg-white sticky top-0 z-30 shadow-sm border-b border-gray-100">
        <div className="max-w-4xl mx-auto px-4 py-3">
          <div className="flex justify-between items-center mb-3">
            <div>
              <h1 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                <span className="text-2xl">ğŸ¤±</span> Burnaby æœˆå­ 7.0
              </h1>
              <p className="text-[10px] md:text-xs text-gray-500 mt-0.5">è­·ç†æŒ‡å— â€¢ æ™ºæ…§å–æ°´ â€¢ æ·±åº¦é£Ÿç™‚</p>
            </div>
            <div className="flex gap-2">
               <button onClick={() => setView('calendar')} className={`p-2 rounded-lg transition ${view === 'calendar' ? 'bg-rose-100 text-rose-700' : 'bg-gray-100 text-gray-500'}`}><Calendar size={18} /></button>
               <button onClick={() => setView('soups')} className={`p-2 rounded-lg transition ${view === 'soups' ? 'bg-cyan-100 text-cyan-700' : 'bg-gray-100 text-gray-500'}`}><BookOpen size={18} /></button>
               <button onClick={() => setView('shopping')} className={`p-2 rounded-lg transition ${view === 'shopping' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-500'}`}><ShoppingCart size={18} /></button>
            </div>
          </div>
          <div className="flex gap-4 text-xs font-medium text-gray-400">
            <span className={view === 'calendar' ? 'text-rose-600' : ''}>æ¯æ—¥æ—¥ç¨‹</span>
            <span className={view === 'soups' ? 'text-cyan-600' : ''}>æ¹¯è­œåœ–æ›¸é¤¨</span>
            <span className={view === 'shopping' ? 'text-green-600' : ''}>æ¡è²·æ¸…å–®</span>
          </div>
        </div>
      </header>

      <main className="max-w-4xl mx-auto px-4 mt-6">
        {view === 'calendar' && (
          <>
            <DailyWellnessCard day={currentDay} />
            <HydrationTracker />
            <div className={`p-4 rounded-xl border mb-6 flex justify-between items-center ${weekInfo[currentWeek].color}`}>
              <div>
                <div className="text-[10px] font-bold uppercase tracking-wider opacity-60">CURRENT PHASE</div>
                <h2 className="text-lg font-bold">{weekInfo[currentWeek].title}</h2>
              </div>
              <div className="text-3xl font-black opacity-10">W{currentWeek}</div>
            </div>
            <div className="mb-6">
               <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-hide snap-x">
                 {[1, 2, 3, 4].map(w => (
                   <div key={w} className="flex gap-1 shrink-0 snap-start">
                     {Array.from({length: 7}, (_, i) => {
                       const d = (w-1)*7 + i + 1;
                       return (
                         <button key={d} onClick={() => setCurrentDay(d)} className={`w-10 h-14 rounded-lg flex flex-col items-center justify-center shrink-0 border transition-all ${currentDay === d ? 'bg-rose-600 text-white border-rose-600 shadow-lg scale-105 z-10' : 'bg-white text-gray-400 border-gray-200 hover:border-rose-300 hover:text-rose-400'}`}>
                           <span className="text-[10px] uppercase font-bold">Day</span>
                           <span className="text-lg font-bold leading-none">{d}</span>
                         </button>
                       );
                     })}
                     {w < 4 && <div className="w-2"></div>}
                   </div>
                 ))}
               </div>
            </div>
            <div className="animate-in slide-in-from-bottom-2 duration-500">
              <div className="flex items-center justify-between mb-4">
                 <div className="flex items-center gap-2">
                   <span className="bg-gray-800 text-white px-2 py-0.5 rounded text-sm font-bold">DAY {currentDay}</span>
                   <span className="text-gray-500 text-sm hidden md:inline">ä»Šæ—¥ç‰¹è‰²èœå–®</span>
                 </div>
                 <div className="flex gap-2">
                    <button disabled={currentDay === 1} onClick={() => setCurrentDay(d => Math.max(1, d - 1))} className="p-1 rounded-full hover:bg-gray-200 disabled:opacity-30"><ChevronLeft size={20}/></button>
                    <button disabled={currentDay === 28} onClick={() => setCurrentDay(d => Math.min(28, d + 1))} className="p-1 rounded-full hover:bg-gray-200 disabled:opacity-30"><ChevronRight size={20}/></button>
                 </div>
              </div>
              <div className="grid md:grid-cols-2 gap-3 md:gap-4">
                 <MealBlock type="breakfast" recipeIds={dayData.breakfast} onClick={setSelectedRecipeIds} />
                 <MealBlock type="lunch" recipeIds={dayData.lunch} onClick={setSelectedRecipeIds} />
                 <MealBlock type="tea" recipeIds={dayData.tea} onClick={setSelectedRecipeIds} />
                 <MealBlock type="dinner" recipeIds={dayData.dinner} onClick={setSelectedRecipeIds} />
              </div>
            </div>
          </>
        )}

        {view === 'soups' && (
           <div className="animate-in fade-in duration-300">
             <div className="mb-6 bg-cyan-50 p-4 rounded-xl border border-cyan-100 text-cyan-900 text-sm">
                <h2 className="font-bold text-lg mb-1 flex items-center gap-2"><Droplet size={18}/> æ¹¯è­œåœ–æ›¸é¤¨</h2>
                <p>æ¹¯æ°´æ˜¯æœˆå­é¤çš„éˆé­‚ã€‚æ‚¨å¯ä»¥æ ¹æ“šè‡ªå·±ç•¶ä¸‹çš„èº«é«”éœ€æ±‚ï¼ˆå¦‚å¡å¥¶ã€è…°ç— ã€æƒ¡éœ²ä¸æ­¢ï¼‰éš¨æ™‚æŸ¥é–±ä¸¦æ›¿æ›æ¯æ—¥èœå–®ä¸­çš„æ¹¯å“ã€‚</p>
             </div>
             <div className="space-y-8">
               {Object.entries(soupCategories).map(([category, ids]) => (
                 <div key={category}>
                   <h3 className="font-bold text-gray-800 mb-3 flex items-center gap-2 border-l-4 border-cyan-400 pl-2">
                     {category}
                     <span className="text-xs font-normal text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full">{ids.length} é“</span>
                   </h3>
                   <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                     {ids.map(id => (
                       <SoupCard key={id} recipeId={id} onClick={setSelectedRecipeIds} />
                     ))}
                   </div>
                 </div>
               ))}
             </div>
           </div>
        )}

        {view === 'shopping' && (
          <div className="animate-in fade-in duration-300">
            <div className="flex p-1 bg-gray-100 rounded-lg mb-6">
              <button onClick={() => setShoppingTab('locations')} className={`flex-1 py-2 text-sm font-bold rounded-md transition ${shoppingTab === 'locations' ? 'bg-white shadow text-gray-800' : 'text-gray-500'}`}>ğŸ“ æ¡è²·åœ°åœ–</button>
              <button onClick={() => setShoppingTab('list')} className={`flex-1 py-2 text-sm font-bold rounded-md transition ${shoppingTab === 'list' ? 'bg-white shadow text-green-700' : 'text-gray-500'}`}>ğŸ“‹ æœ¬é€±æ¸…å–®</button>
            </div>
            {shoppingTab === 'locations' ? (
               <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-6">
                  <h2 className="text-xl font-bold border-b pb-4 flex items-center gap-2"><MapPin className="text-rose-500"/> Burnaby æ¡è²·è£œçµ¦ç«™</h2>
                  <div className="space-y-6">
                    {[
                      {icon: 'ğŸ¥¦', name: 'T&T å¤§çµ±è¯', desc: 'æ—¥æœ¬å±±è—¥ (Nagaimo)ã€é’æœ¨ç“œã€å†·å‡æ —å­ã€è’¸è‚‰ç²‰ã€ç´…æ£—æ¸æã€çƒéª¨é›ã€‚'},
                      {icon: 'ğŸ¥©', name: 'Costco', desc: 'å»éª¨é›è…¿è‚‰ã€ç¾Šè‚‰å¡Š (Lamb Stew)ã€å†·å‡è¦ä»ã€é®­é­šã€æœ‰æ©Ÿè èœã€å¸Œè‡˜å„ªæ ¼ã€Quaker Oatsã€‚'},
                      {icon: 'ğŸŒ¿', name: 'Whole Foods', desc: 'æœ‰æ©Ÿè–‘ã€é«˜å“è³ªé›è‚‰ã€äºéº»ç±½ç²‰ (Flaxseed)ã€‚'},
                      {icon: 'ğŸ²', name: 'éº—æ™¶å»£å ´', desc: 'ä¸­è—¥è¡Œ (ç”ŸåŒ–æ¹¯/å››ç‰©åŒ…)ã€æ–°é®®è±¬è‚/è…°èŠ± (éœ€æ—©å»)ã€‚'}
                    ].map((store, i) => (
                      <div key={i} className="flex gap-4">
                        <div className="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-lg shrink-0">{store.icon}</div>
                        <div>
                          <h3 className="font-bold text-gray-800">{store.name}</h3>
                          <p className="text-sm text-gray-600 mt-1">{store.desc}</p>
                        </div>
                      </div>
                    ))}
                  </div>
               </div>
            ) : (
              <div className="space-y-6">
                <div className="bg-green-50 p-4 rounded-xl border border-green-100 text-green-900 text-sm mb-4">
                  <p>é€™æ˜¯æ ¹æ“š<b>ã€Œç¬¬ {currentWeek} é€±ã€</b>èœå–®æ‰€ç”Ÿæˆçš„å»ºè­°è³¼ç‰©æ¸…å–®ã€‚æ‚¨å¯ä»¥å°‡æ­¤ç•«é¢æˆªåœ–å‚³çµ¦éšŠå‹ï¼</p>
                </div>
                <div className="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                  <div className="bg-green-600 text-white p-4">
                    <h3 className="font-bold text-lg flex items-center gap-2"><CheckSquare size={20}/> ç¬¬ {currentWeek} é€±æ¡è²·æ¸…å–®</h3>
                    <p className="text-green-100 text-xs mt-1 opacity-90">{WEEKLY_LISTS[currentWeek].focus}</p>
                  </div>
                  <div className="p-4 grid md:grid-cols-2 gap-6">
                    {Object.entries(WEEKLY_LISTS[currentWeek].categories).map(([catName, items]) => (
                      <div key={catName}>
                        <h4 className="font-bold text-gray-700 mb-2 border-b pb-1 text-sm">{catName}</h4>
                        <ul className="space-y-2">
                          {items.map((item, idx) => (
                            <li key={idx} className="flex items-start gap-2 text-sm text-gray-600">
                              <input type="checkbox" className="mt-1 accent-green-600" />
                              <span>{item}</span>
                            </li>
                          ))}
                        </ul>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}
          </div>
        )}
      </main>
      {selectedRecipeIds && <RecipeModal recipeIds={selectedRecipeIds} onClose={() => setSelectedRecipeIds(null)} />}
    </div>
  );
}
