<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>產前課程終極詳盡實錄 - The Childbearing Society</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap');
        
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #f0f4f8; 
            color: #1a202c; 
            line-height: 1.9; 
        }
        
        h1, h2, h3, h4 { font-family: 'Noto Serif TC', serif; }

        /* 側邊導覽列 */
        .sidebar {
            width: 350px;
            background-color: #2d3748;
            color: #e2e8f0;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid #4a5568;
        }
        
        .sidebar::-webkit-scrollbar { width: 8px; }
        .sidebar::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }

        .nav-section-title {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #a0aec0;
            padding: 25px 25px 10px;
            font-weight: 800;
            border-bottom: 1px solid #4a5568;
            margin-bottom: 5px;
        }

        .nav-link {
            display: block;
            padding: 12px 25px;
            color: #cbd5e0;
            text-decoration: none;
            transition: all 0.2s;
            font-size: 0.95rem;
            border-left: 4px solid transparent;
        }
        .nav-link:hover { background-color: #4a5568; color: #fff; }
        .nav-link.active { background-color: #2b6cb0; color: #fff; border-left-color: #63b3ed; }

        /* 主內容 */
        .main-content {
            margin-left: 350px;
            padding: 60px 90px;
            max-width: 1200px;
            background-color: #fff;
            min-height: 100vh;
            box-shadow: -5px 0 25px rgba(0,0,0,0.05);
        }

        /* 標題樣式 */
        h1 { font-size: 3rem; font-weight: 700; color: #2c5282; margin-bottom: 2rem; border-bottom: 2px solid #bee3f8; padding-bottom: 1rem; }
        h2 { font-size: 2.2rem; font-weight: 700; color: #2b6cb0; margin-top: 5rem; margin-bottom: 2rem; padding-left: 1rem; border-left: 8px solid #4299e1; }
        h3 { font-size: 1.6rem; font-weight: 600; color: #2c5282; margin-top: 3rem; margin-bottom: 1.5rem; display: flex; align-items: center; }
        h3 i { margin-right: 12px; font-size: 1.2rem; color: #63b3ed; }
        h4 { font-size: 1.2rem; font-weight: 700; color: #4a5568; margin-top: 2rem; margin-bottom: 1rem; }
        
        p { margin-bottom: 1.5rem; text-align: justify; font-size: 1.1rem; color: #4a5568; }
        
        /* 引用/逐字稿區塊 */
        .transcript-box {
            background-color: #fff5f5;
            border-left: 6px solid #fc8181;
            padding: 25px 35px;
            margin: 30px 0;
            font-style: italic;
            color: #c53030;
            font-family: 'Noto Serif TC', serif;
            position: relative;
        }
        .transcript-box::before {
            content: "❝";
            position: absolute;
            top: -20px;
            left: 10px;
            font-size: 4rem;
            color: #fed7d7;
            z-index: 0;
        }
        .transcript-box p { position: relative; z-index: 1; color: #742a2a; }

        /* 實作步驟區塊 */
        .practice-box {
            background-color: #f0fff4;
            border: 2px solid #c6f6d5;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
        }
        .practice-header {
            background-color: #48bb78;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        /* AI Assistant Styles */
        #ai-fab {
            position: fixed;
            bottom: 40px;
            right: 40px;
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            box-shadow: 0 10px 25px rgba(118, 75, 162, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2000;
            font-size: 28px;
        }
        #ai-fab:hover { transform: scale(1.1) rotate(5deg); }
        
        #ai-modal {
            position: fixed;
            bottom: 120px;
            right: 40px;
            width: 400px;
            max-height: 600px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            z-index: 2000;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid #e2e8f0;
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ai-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: white;
        }
        
        .ai-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background-color: #f7fafc;
            min-height: 300px;
            max-height: 450px;
        }

        .ai-input-area {
            padding: 15px;
            border-top: 1px solid #e2e8f0;
            background-color: white;
            display: flex;
            gap: 10px;
        }

        .ai-message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 0.95rem;
            line-height: 1.5;
            max-width: 85%;
        }
        .user-msg {
            background-color: #ebf4ff;
            color: #2b6cb0;
            margin-left: auto;
            border-bottom-right-radius: 2px;
        }
        .ai-msg {
            background-color: white;
            color: #4a5568;
            border: 1px solid #e2e8f0;
            margin-right: auto;
            border-bottom-left-radius: 2px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }
        .ai-msg strong { color: #6b46c1; }

        .typing-indicator span {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #cbd5e0;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out both;
            margin: 0 2px;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .suggestion-chip {
            display: inline-block;
            padding: 6px 12px;
            background-color: #edf2f7;
            color: #4a5568;
            border-radius: 20px;
            font-size: 0.85rem;
            margin: 5px 5px 5px 0;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e2e8f0;
        }
        .suggestion-chip:hover {
            background-color: #e9d8fd;
            color: #553c9a;
            border-color: #d6bcfa;
        }

        /* 列表 */
        ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1.5rem; }
        ol { list-style-type: decimal; padding-left: 1.5rem; margin-bottom: 1.5rem; }
        li { margin-bottom: 0.8rem; }

        /* 手機適配 */
        @media (max-width: 1024px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 20px; }
            #ai-modal { width: 90%; right: 5%; bottom: 100px; }
        }
    </style>
</head>
<body>

<!-- 側邊選單 -->
<div class="sidebar">
    <div class="p-6 text-white font-bold text-xl flex items-center border-b border-gray-600 bg-gray-800">
        <i class="fas fa-file-alt mr-3"></i> 終極逐字講義
    </div>
    
    <div class="nav-section-title">一、產前基礎觀念</div>
    <a href="#intro" class="nav-link">1. 預產期的統計真相</a>
    <a href="#labor-signs" class="nav-link">2. 產兆：如何辨識真假</a>
    <a href="#stages" class="nav-link">3. 產程四階段總覽</a>
    <a href="#hospital-time" class="nav-link">4. 5-1-1 法則與去醫院時機</a>
    
    <div class="nav-section-title">二、舒緩與應對 (實作詳解)</div>
    <a href="#ice-game" class="nav-link">5. 冰塊練習：六種應對法</a>
    <a href="#golden-light" class="nav-link">★ 金色光芒視覺化引導詞</a>
    <a href="#partner-support" class="nav-link">6. 伴侶的神隊友指南</a>
    <a href="#massage-detailed" class="nav-link">7. 按摩手法全解析 (含泳池浮條)</a>
    <a href="#rebozo-detailed" class="nav-link">8. Rebozo 萬用巾四式</a>
    
    <div class="nav-section-title">三、醫療介入</div>
    <a href="#induction" class="nav-link">9. 催生與自然催生法</a>
    <a href="#epidural" class="nav-link">10. 無痛分娩 (Epidural)</a>
    <a href="#sterile-water" class="nav-link">11. 無菌水注射 (背部陣痛)</a>
    <a href="#cesarean" class="nav-link">12. 剖腹產手術細節</a>
    <a href="#decision" class="nav-link">13. BRAIN 決策模型</a>
    
    <div class="nav-section-title">四、分娩與新生兒</div>
    <a href="#pushing" class="nav-link">14. 第二產程：推擠的藝術</a>
    <a href="#third-stage" class="nav-link">15. 胎盤與延遲斷臍</a>
    <a href="#newborn-care" class="nav-link">16. 新生兒外觀與護理</a>
    
    <div class="nav-section-title">五、產後生活實務</div>
    <a href="#postpartum" class="nav-link">17. 產後恢復與情緒</a>
    <a href="#baby-wearing" class="nav-link">18. 嬰兒揹巾穿戴教學 (4種)</a>
    <a href="#diapering" class="nav-link">19. 換尿布與布尿布折法</a>
    <a href="#sleep" class="nav-link">20. 睡眠安全與共眠守則</a>
</div>

<!-- 主內容 -->
<div class="main-content" id="content-area">

    <div id="intro">
        <h1>1. 預產期的統計真相與心態</h1>
        <p>Stephanie 首先強調，即使面對相同的資訊，每個人都會做出不同的決定，這完全沒問題。所有的選擇在這裡都會受到支持。</p>
        
        <h3>關於日期的統計數據</h3>
        <ul>
            <li><strong>預產期當天：</strong> 只有 <strong>3-4%</strong> 的寶寶會在預產期當天出生。</li>
            <li><strong>足月定義：</strong> 懷孕 37 週到 42 週（整整 5 週的區間）。</li>
            <li><strong>第一胎平均：</strong> <strong>41 週</strong>（比預產期晚一週）。</li>
        </ul>
        <div class="transcript-box">
            <p>「這就像我們不會都在同一個年齡進入青春期，也不會都在同一個月長第一顆牙齒。這是人類發展的自然變異。有些寶寶只需要較短的時間就能讓肺部成熟，有些則需要較長的時間。」</p>
        </div>
        <p><strong>建議：</strong> 把預產期當作「可能月份」。如果你把它當作「過期日」，之後的每一天你都會感到焦慮，覺得事情不對勁，這會影響你的決策。</p>
    </div>

    <section id="labor-signs">
        <h2>2. 產兆：身體準備與真假辨識</h2>
        
        <h3>身體準備信號 (Late Pregnancy)</h3>
        <p>這些不是立刻要生的信號，而是身體正在準備：</p>
        <ul>
            <li><strong>胎兒下降 (Lightening)：</strong> 感覺呼吸順暢，但骨盆壓力大，頻尿。</li>
            <li><strong>築巢本能 (Nesting Urge)：</strong> 強迫性的打掃衝動（如用牙刷刷窗戶）。</li>
            <li><strong>布雷希氏收縮 (Braxton Hicks)：</strong> 練習性宮縮，不規則，休息會消失。</li>
            <li><strong>腸胃排空：</strong> 軟便或腹瀉，身體騰出空間。</li>
        </ul>

        <h3>真正的產兆 (True Labor)</h3>
        <div class="transcript-box">
            <p>「什麼啟動了產程？是寶寶。當寶寶的肺部發育成熟，準備好呼吸空氣時，他們會釋放一種蛋白質，刺激母體產生荷爾蒙，從而啟動產程。」</p>
        </div>
        <ol>
            <li><strong>規律陣痛 (Contractions)：</strong> 這是唯一確定的信號。越來越強、越來越密、無法忽視。</li>
            <li><strong>破水 (Water Breaking)：</strong>
                <ul>
                    <li>只有 <strong>10%</strong> 的人以破水開始。大部分人是在產程中間破水。</li>
                    <li>如果先破水但沒陣痛，請聯絡醫生（通常等待24-48小時）。</li>
                </ul>
            </li>
        </ol>
    </section>

    <section id="stages">
        <h2>3. 產程四階段總覽</h2>
        <ul>
            <li><strong>第一產程：</strong> 子宮頸擴張（0-10公分）。<strong>最漫長</strong>的階段。</li>
            <li><strong>第二產程：</strong> 推擠，寶寶出生（平均約 2 小時）。</li>
            <li><strong>第三產程：</strong> 娩出胎盤。</li>
            <li><strong>第四產程：</strong> 產後最初的恢復期。</li>
        </ul>
    </section>

    <section id="hospital-time">
        <h2>4. 第一產程與去醫院時機</h2>
        
        <h3>子宮頸的變化</h3>
        <p>子宮頸不僅要打開 (Dilate)，還要變薄 (Efface)。</p>
        <div class="transcript-box">
            <p>「想像一件高領毛衣的領口要套過一顆頭。一開始領口很厚很硬（像軟骨），隨著荷爾蒙作用，它變得像奶油一樣軟，變薄，最後完全退去。」</p>
        </div>

        <h3>三個子階段</h3>
        <ol>
            <li><strong>早期產程 (Early Labor, 0-4cm)：</strong> 漫長（6-24小時+）。興奮、緊張。<strong>對策：忽視它！</strong> 繼續睡覺、吃飯。不要去醫院，會被退貨。</li>
            <li><strong>活躍期 (Active Labor, 4-8cm)：</strong> 平均 4-12 小時。宮縮強烈，進入「產程恍惚狀態」(Labor Land)。不想說話，眼神迷離。</li>
            <li><strong>過渡期 (Transition, 8-10cm)：</strong> 最短（15分-1小時）但最強烈。腎上腺素飆升。特徵：突然清醒，說「我不生了」、「我要回家」。</li>
        </ol>

        <h3>何時去醫院？ (5-1-1 法則)</h3>
        <ul>
            <li><strong>5：</strong> 宮縮頻率每 5 分鐘一次。</li>
            <li><strong>1：</strong> 每次持續 1 分鐘。</li>
            <li><strong>1：</strong> 持續 1 小時。</li>
        </ul>
        <p><strong>行為指標：</strong> 如果還能笑著聊天 -> 待在家。如果宮縮時必須停下來、無法說話 -> 出發。</p>
    </section>

    <section id="ice-game">
        <h2>5. 冰塊練習：六種應對法</h2>
        <p>課程中通過握住冰塊 60 秒來模擬宮縮。以下是六種測試過的應對法：</p>
        <ol>
            <li><strong>什麼都不做：</strong> 痛苦漫長。</li>
            <li><strong>轉移注意力 (Grounding)：</strong> 張開眼睛，運用五感描述周遭（看、聽、觸、味）。</li>
            <li><strong>節奏敲擊 (Tune Tapping)：</strong> 在腦中唱一首歌，並用手指在腿上打拍子。</li>
            <li><strong>呼吸法 (Breathing)：</strong> 
                <br>- <strong>三重呼吸：</strong> 鼻子吸氣，嘴巴像吹蠟燭般吐氣，專注「放鬆」。
                <br>- <strong>2-4 呼吸法：</strong> 吸氣數 2，吐氣數 4。
            </li>
            <li><strong>發聲 (Toning)：</strong> 發出低沉的「噢——」或「啊——」。原理：口腔放鬆 = 骨盆底放鬆。</li>
            <li><strong>伴侶引導放鬆：</strong> 這是長達 4 分鐘的練習（見下方）。</li>
        </ol>
    </section>

    <section id="golden-light">
        <h2>★ 金色光芒 (Golden Light) 視覺化引導詞</h2>
        <div class="practice-box">
            <p class="practice-header">視覺化腳本 (錄音逐字)</p>
            <p>「現在，媽媽們請閉上眼睛。想像你感覺到一個宮縮開始了。想像它就像你腹部深處的一個小火花，開始變大。」</p>
            <p>「隨著它變大，它變得更亮。想像那是<strong>金色的光芒</strong>。隨著它變大變亮，它也變得更溫暖。」</p>
            <p>「它持續生長，直到充滿了你的整個腹部，你的肚子溫暖且發光。想像從遠處看，任何人都能看到你的肚子閃耀著金光。」</p>
            <p>「這種感覺繼續擴大，超出了腹部。從膝蓋到肩膀，你都在發光，閃爍著溫暖的金色光芒。」</p>
            <p>「它變得更大、更強、更亮，直到有點太亮、太強、太熱。就在它開始讓人感覺無法控制時，它轉向了，開始變涼、變暗、變小。」</p>
            <p>「它持續收縮、變暗、冷卻，直到只在你的腹部發光。然後它變得更小、更暗，最後只剩一個小火花。然後它閃爍一下，消失了。」</p>
            <p>「深吸一口氣，吐氣，全身放鬆，在宮縮之間休息。」</p>
        </div>
    </section>

    <section id="partner-support">
        <h2>6. 伴侶的神隊友指南</h2>
        <p><strong>核心任務：</strong> 保護催產素 (Oxytocin)。催產素是「害羞的荷爾蒙」，需要安全、私密、溫暖、昏暗的環境。</p>
        
        <h3>具體行動：</h3>
        <ul>
            <li><strong>不用問，直接做：</strong> ❌不要問「你要喝水嗎？」（這需要思考）。✅直接把吸管遞到嘴邊。</li>
            <li><strong>提供食物：</strong> 每小時餵食（蜂蜜棒、優格、堅果）。</li>
            <li><strong>提醒上廁所：</strong> 每 1-2 小時。脹滿的膀胱會阻礙寶寶下降。</li>
            <li><strong>營造氣氛：</strong> 關燈、點電子蠟燭、音樂、精油。</li>
            <li><strong>當守門員：</strong> 處理所有雜事，回答醫護人員問題。</li>
            <li><strong>肯定言語：</strong> 說「你做得很好」、「我在這裡」。❌絕對不要說「你看起來很痛」。</li>
        </ul>

        <div class="practice-box">
            <p class="practice-header">伴侶引導放鬆術 (4分鐘練習步驟)</p>
            <ol>
                <li><strong>手放膝蓋：</strong> 媽媽感覺到手，就專注放鬆腿部。</li>
                <li><strong>手放肩膀：</strong> 媽媽放鬆肩膀和手臂，感覺伴侶支持。</li>
                <li><strong>手放背部：</strong> 放鬆脊椎和背部肌肉。</li>
                <li><strong>手放頭部：</strong> 放鬆眉頭、下巴。</li>
                <li><strong>手放肚子：</strong> 連結寶寶，提醒是團隊合作。</li>
            </ol>
        </div>
    </section>

    <section id="massage-detailed">
        <h2>7. 按摩手法全解析</h2>
        
        <h3>1. 反向施壓 (Counter Pressure)</h3>
        <p><strong>適用：</strong> 腰痠型陣痛 (Back Labor)。</p>
        <p><strong>做法：</strong> 伴侶用掌根，<strong>非常用力</strong>地按壓產婦的薦骨（尾椎上方平平的那塊骨頭）。持續整個宮縮期間。</p>

        <h3>2. 雙臀擠壓 (Double Hip Squeeze)</h3>
        <p><strong>做法：</strong> 雙手放在產婦髖骨兩側（手掌在肉多的地方，手指朝向脊椎），用力往內擠壓。這能暫時打開骨盆出口。</p>

        <h3>3. 腿部熨燙 (Leg Ironing)</h3>
        <p><strong>做法：</strong> 用手掌大面積地由大腿根部往膝蓋方向用力「熨燙」撫摸。這利用 Gate Control Theory 轉移痛覺。</p>

        <h3>4. 泳池浮條法 (Pool Noodle Technique)</h3>
        <p><strong>準備：</strong> 需自備泳池浮條 (Dollar store 買，切一半)。</p>
        <p><strong>做法：</strong> 伴侶拿著浮條，在產婦背部上下滾動。<strong>非常用力</strong>，速度要慢。這在產程中感覺棒極了。</p>

        <h3>5. 掰冰棒 (Breaking the Popsicle)</h3>
        <p><strong>部位：</strong> 手掌或腳掌。</p>
        <p><strong>做法：</strong> 將手指放在產婦手心/腳心，拇指放在手背/腳背，從中間向兩側用力推開（像要掰斷冰棒一樣）。</p>

        <h3>6. 拇指走路 (Thumb Walking)</h3>
        <p><strong>做法：</strong> 伴侶的小指扣住產婦的小指和食指，用手背支撐她的手，然後用兩個大拇指在她的手掌心交替按壓、走路。這是很細緻的按摩。</p>
    </section>

    <section id="rebozo-detailed">
        <h2>8. Rebozo 萬用巾四式詳解</h2>
        <p>Rebozo 是墨西哥傳統長巾。如果沒有，可以用床單代替。</p>

        <div class="practice-box">
            <ol>
                <li><strong>搖蘋果樹 (Shaking the Apple Tree)：</strong>
                    <br><em>做法：</em> 長巾包住產婦臀部（整個屁股）。伴侶站在後方抓緊兩端，<strong>快速、小幅度地抖動</strong>。
                    <br><em>效果：</em> 放鬆緊繃的骨盆底肌。平時做會想尿尿，產程中做會非常放鬆。
                </li>
                <li><strong>Sifting (托腹搖晃)：</strong>
                    <br><em>做法：</em> 產婦四足跪姿。長巾包住大肚子。伴侶站在上方，輕輕左右提拉搖晃肚子。
                    <br><em>效果：</em> 放鬆腹部肌肉，幫助寶寶轉身到正確位置。
                </li>
                <li><strong>輔助蹲姿 (Supported Squat)：</strong>
                    <br><em>做法：</em> 伴侶將長巾掛在脖子上（抓緊兩端），或將長巾打結掛在門框上。產婦拉著長巾兩端做深蹲，減輕腿部負擔。
                </li>
                <li><strong>坐姿拉引 (Sitting Pull)：</strong>
                    <br><em>做法：</em> 產婦坐在長巾上（長巾橫跨椅子）。伴侶跪在前方，膝蓋對膝蓋。伴侶拉著長巾的兩端往自己方向拉（對抗產婦尾骨的壓力）。宮縮時拉，結束放鬆。
                </li>
            </ol>
        </div>
    </section>

    <section id="induction">
        <h2>9. 催生 (Induction)</h2>
        
        <h3>醫療催生三部曲</h3>
        <ol>
            <li><strong>Cervidil (前列腺素)：</strong> 像衛生棉條一樣放入陰道，軟化子宮頸。可以回家等待。</li>
            <li><strong>人工破水：</strong> 醫生手動弄破羊水囊。</li>
            <li><strong>Syntocinon (合成催產素)：</strong> 點滴注射。</li>
        </ol>
        <p><strong>缺點：</strong> 合成催產素產生的宮縮比自然宮縮更痛、更急（沒有波峰波谷，而是直接衝頂），且大腦不會分泌內啡肽 (Endorphins) 來止痛。</p>

        <h3>自然催生法 (Natural Induction)</h3>
        <ul>
            <li><strong>乳頭刺激：</strong> 模擬哺乳，產生天然催產素。</li>
            <li><strong>性行為：</strong> 精液含有前列腺素，可軟化子宮頸；高潮會產生催產素。</li>
            <li><strong>吃椰棗 (Dates)：</strong> 每天吃六顆，研究顯示有助於軟化子宮頸。</li>
            <li><strong>催生雞尾酒 (Castor Oil Cocktail)：</strong> 
                <br><em>配方：</em> 蓖麻油 + 杏桃汁 (Apricot juice) + 堅果醬 (Nut butter) + (有時加馬鞭草/Verbanana? 逐字稿口誤，通常是 Lemon Verbena)。
                <br><em>原理：</em> 刺激腸胃蠕動進而刺激子宮。非常難喝且會引起腹瀉。需助產士指導。
            </li>
            <li><strong>針灸 (Acupuncture)：</strong> 成功率高達 80%。</li>
        </ul>
    </section>

    <section id="epidural">
        <h2>10. 無痛分娩 (Epidural)</h2>
        <ul>
            <li><strong>風險：</strong> 延長產程、必須臥床（接尿管）、發燒（導致寶寶需觀察）、血壓下降（需打點滴 -> 產後水腫）。</li>
            <li><strong>最佳策略：</strong> 盡量等到<strong>活躍期且規律</strong>後再打。</li>
            <li><strong>如果打了之後：</strong> 仍需使用花生球 (Peanut Ball) 變換姿勢（側臥）。</li>
        </ul>
    </section>

    <section id="sterile-water">
        <h2>11. 無菌水注射 (Sterile Water Injections)</h2>
        <div class="transcript-box">
            這是一個針對<strong>嚴重腰痠 (Back Labor)</strong> 的特殊技巧，很多人不知道。
            <ul>
                <li><strong>做法：</strong> 護理師在產婦下背部皮下注射 4 針無菌水（形成小水泡）。</li>
                <li><strong>感覺：</strong> 像被蜜蜂叮一樣刺痛，持續約 10 秒。</li>
                <li><strong>效果：</strong> 能<strong>完全消除背痛</strong>，持續 60-90 分鐘。可以重複施打。</li>
                <li><strong>原理：</strong> Gate Control Theory。沒有藥物副作用。</li>
            </ul>
        </div>
    </section>

    <section id="cesarean">
        <h2>12. 剖腹產手術細節</h2>
        <p><strong>手術過程：</strong></p>
        <ul>
            <li><strong>準備：</strong> 約 30 分鐘。伴侶需換衣服，這是唯一分離的時間。</li>
            <li><strong>麻醉：</strong> 脊椎麻醉 (Spinal) 或加強 Epidural。</li>
            <li><strong>切開層次：</strong> 皮膚 -> 脂肪 -> 筋膜 (Fascia) -> 腹膜 (Peritoneum) -> 子宮 (Uterus)。肌肉通常是撥開而非切斷。</li>
            <li><strong>取出寶寶：</strong> 約 10 分鐘。</li>
            <li><strong>縫合：</strong> 約 45 分鐘 - 1 小時。</li>
        </ul>
        <p><strong>溫柔剖腹產 (Gentle C-Section)：</strong> 可以要求音樂、降低布簾看寶寶出生、手術台上肌膚接觸。</p>
    </section>

    <section id="decision">
        <h2>13. BRAIN 決策模型</h2>
        <p>面對任何醫療建議，請問：</p>
        <ul>
            <li><strong>B (Benefits)：</strong> 好處是什麼？</li>
            <li><strong>R (Risks)：</strong> 風險是什麼？</li>
            <li><strong>A (Alternatives)：</strong> 有替代方案嗎？</li>
            <li><strong>I (Instinct)：</strong> 直覺怎麼說？</li>
            <li><strong>N (Nothing)：</strong> <strong>如果現在什麼都不做（等一小時），會怎樣？</strong></li>
        </ul>
    </section>

    <section id="pushing">
        <h2>14. 第二產程：推擠的藝術</h2>
        <ul>
            <li><strong>感覺：</strong> 強烈的便意。</li>
            <li><strong>原則：</strong> 聽從身體 (Spontaneous Pushing)，不要閉氣死命推 (Coached Pushing)。</li>
            <li><strong>進展：</strong> 「進兩步，退一步」是正常的，這是在保護會陰。</li>
            <li><strong>體位：</strong> 避免平躺 (Lithotomy)。嘗試側臥、四足跪姿、蹲姿或使用生產椅。</li>
        </ul>
    </section>

    <section id="third-stage">
        <h2>15. 胎盤與延遲斷臍</h2>
        <ul>
            <li><strong>延遲斷臍：</strong> 寶寶出生時有 <strong>35%</strong> 的血液在胎盤。建議等待臍帶變白、停止搏動再剪（約 2-5 分鐘）。</li>
            <li><strong>胎盤：</strong> 隨後排出。如果不處理（Lotus Birth）或食用（Placenta Encapsulation）由你決定。</li>
        </ul>
    </section>

    <section id="newborn-care">
        <h2>16. 新生兒外觀與黃金一小時</h2>
        <ul>
            <li><strong>外觀：</strong> 剛出生可能偏紫灰（循環未建立）、有胎脂 (Vernix)、胎毛 (Lanugo)、頭型尖 (Cone head)。</li>
            <li><strong>胎脂：</strong> 不要洗掉！最好的保濕與免疫。推遲第一次洗澡。</li>
            <li><strong>黃金一小時：</strong> 立即肌膚接觸。穩定體溫、心跳、血糖。</li>
        </ul>
    </section>

    <section id="postpartum">
        <h2>17. 產後恢復與情緒</h2>
        <ul>
            <li><strong>惡露 (Lochia)：</strong> 持續 3-6 週。</li>
            <li><strong>坐浴 (Sitz Bath)：</strong> 溫水+瀉鹽，舒緩傷口。</li>
            <li><strong>情緒：</strong> Baby Blues 很常見。</li>
            <li><strong>生存法則：</strong> 家務外包、跟著寶寶睡、接受混亂。</li>
        </ul>
    </section>

    <section id="baby-wearing">
        <h2>18. 嬰兒揹巾穿戴教學 (四種款式詳解)</h2>
        <div class="practice-box">
            <p class="practice-header">安全準則 TICKS</p>
            <p>Tight (緊貼), In view (可見), Close enough to kiss (親得到頭), Keep chin off chest (下巴不貼胸), Supported back (背部支撐)。</p>
            
            <h3>1. 環形揹巾 (Ring Sling)</h3>
            <p><strong>穿法：</strong> 襯墊在肩膀，環在鎖骨下。寶寶放入袋中（像吊床），拉緊尾端調整鬆緊。</p>
            
            <h3>2. Mei Tai (綁帶式)</h3>
            <p><strong>穿法：</strong> 像屠夫圍裙。先綁腰帶 -> 寶寶胸對胸 -> 肩帶過肩 -> 背後交叉 -> 繞過寶寶腿下 -> 在寶寶背後或屁股下打結。</p>
            
            <h3>3. 軟結構式 (Ergo/Soft Structured)</h3>
            <p><strong>穿法：</strong> 扣腰帶 -> 抱寶寶 -> 肩帶背上 -> 扣背後扣環（如果是新生兒需用護墊）。最方便，適合外出。</p>
            
            <h3>4. 彈性長巾 (Stretchy Wrap - 最複雜但最包覆)</h3>
            <p><strong>穿法步驟：</strong>
                <br>1. 找到 Logo 放在肚臍位置。
                <br>2. 兩端往後繞，在背後交叉。
                <br>3. 拉過肩膀回到前面。
                <br>4. 把兩端塞進肚子前的 Logo 橫布條內。
                <br>5. 拉緊、在前面交叉 (形成 X)。
                <br>6. 繞到背後打結（或繞回前面打結）。
                <br><strong>放入寶寶：</strong> 把寶寶放入胸前的 X 內（腿分開），再拉起橫布條包覆寶寶全身。
            </p>
        </div>
    </section>

    <section id="diapering">
        <h2>19. 換尿布實戰</h2>
        <ul>
            <li><strong>護理：</strong> 不用爽身粉。紅屁股用椰子油。盡量用水洗。</li>
            <li><strong>布尿布折法 (Pre-fold)：</strong>
                <br>雖然布上有直紋，但要<strong>逆著紋路</strong>（像橫向國旗）折成三折。
                <br>將折好的布放入防水外褲 (Cover) 中。
                <br>注意：如果布太長，要反折，反折處放在寶寶背後（避免便便漏出）。
            </li>
            <li><strong>清洗：</strong> 全母乳便便可直接丟洗衣機（水溶性）。</li>
        </ul>
    </section>

    <section id="sleep">
        <h2>20. 睡眠安全</h2>
        <ul>
            <li><strong>ABC 原則：</strong> Alone (單獨), Back (仰睡), Crib (嬰兒床)。</li>
            <li><strong>同床共眠 (Bed Sharing)：</strong> 如果必須這樣做，請採用 <strong>Cuddle Curl</strong> 姿勢（媽媽側臥，像蝦米一樣捲曲圍繞寶寶，膝蓋彎曲，手臂在寶寶頭上方）。這能防止翻身壓到寶寶。</li>
        </ul>
    </section>

    <div class="mt-16 p-8 bg-blue-50 rounded-lg text-center text-blue-800">
        <p class="font-bold text-xl">祝您生產順利，享受這段奇妙的旅程！</p>
        <p class="mt-2 text-sm">本講義整理自 Stephanie Andrach 授課之完整錄音逐字稿。</p>
    </div>

</div>

<!-- Gemini AI FAB -->
<div id="ai-fab" onclick="toggleAiModal()">
    <i class="fas fa-sparkles"></i>
</div>

<!-- Gemini AI Modal -->
<div id="ai-modal">
    <div class="ai-header">
        <div class="flex justify-between items-center">
            <div class="font-bold text-lg"><i class="fas fa-robot mr-2"></i>✨ AI 產前萬能助教</div>
            <button onclick="toggleAiModal()"><i class="fas fa-times"></i></button>
        </div>
        <div class="text-xs opacity-80 mt-1">基於課程內容的隨身 Doula</div>
    </div>
    <div class="p-3 bg-white border-b border-gray-100 overflow-x-auto whitespace-nowrap">
        <div class="suggestion-chip" onclick="setPrompt('我現在陣痛 5 分鐘一次，該去醫院嗎？')">🚑 產兆評估</div>
        <div class="suggestion-chip" onclick="setPrompt('我好痛，請給我一個舒緩引導')">💆‍♀️ 舒緩教練</div>
        <div class="suggestion-chip" onclick="setPrompt('幫我用 BRAIN 模式思考是否該催生')">📝 醫療決策</div>
        <div class="suggestion-chip" onclick="setPrompt('請給我一段生產肯定語')">💖 肯定小卡</div>
    </div>
    <div class="ai-content" id="chat-container">
        <div class="ai-msg ai-message">
            <strong>AI 助教：</strong><br>
            嗨！我是您的 AI 陪產員。我都讀過 Stephanie 老師的講義了。<br><br>
            不論是現在覺得痛需要引導、不確定是否該去醫院，或是需要醫療決策建議，我都在這裡陪您。<br><br>
            請問現在有什麼我可以幫忙的嗎？
        </div>
    </div>
    <div class="ai-input-area">
        <input type="text" id="user-input" class="flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:border-purple-500" placeholder="輸入您的問題...">
        <button onclick="sendMessage()" class="bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-purple-700 transition">
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
</div>

<script>
    // Toggle Modal
    function toggleAiModal() {
        const modal = document.getElementById('ai-modal');
        if (modal.style.display === 'flex') {
            modal.style.display = 'none';
        } else {
            modal.style.display = 'flex';
        }
    }

    function setPrompt(text) {
        document.getElementById('user-input').value = text;
        sendMessage();
    }

    async function sendMessage() {
        const inputField = document.getElementById('user-input');
        const chatContainer = document.getElementById('chat-container');
        const userText = inputField.value.trim();
        
        if (!userText) return;

        // Add User Message
        const userDiv = document.createElement('div');
        userDiv.className = 'user-msg ai-message';
        userDiv.innerText = userText;
        chatContainer.appendChild(userDiv);
        inputField.value = '';
        chatContainer.scrollTop = chatContainer.scrollHeight;

        // Add Loading
        const loadingDiv = document.createElement('div');
        loadingDiv.className = 'ai-msg ai-message typing-indicator';
        loadingDiv.innerHTML = '<span></span><span></span><span></span>';
        loadingDiv.id = 'loading-msg';
        chatContainer.appendChild(loadingDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;

        // Get Page Context (Simple extraction)
        const context = document.getElementById('content-area').innerText.substring(0, 25000); // Limit context size roughly

        const apiKey = ""; // API Key provided by environment
        const systemPrompt = `
            你是一位專業、溫暖且充滿支持性的產前教育 AI 助教，你的名字是「AI 陪產員」。
            你的知識來源是使用者提供的產前課程講義（由 Stephanie Andrach 授課）。
            
            請遵循以下原則：
            1. **語氣：** 像 Stephanie 老師一樣溫柔、幽默、不帶評判 (Non-judgmental)。強調「所有的選擇都是好的選擇」。
            2. **核心理念：** 鼓勵「功能性疼痛」的觀念，推廣「保護催產素」，並使用 BRAIN 模型協助決策。
            3. **回答依據：** 優先使用講義中的內容（如 5-1-1 法則、Labor Land 概念、Rebozo 技巧）。
            4. **特定情境：**
               - 如果使用者問「該去醫院嗎？」，請評估她是否進入 "Labor Land"（不想說話、專注內在）。
               - 如果使用者說「好痛」，提供具體的舒緩引導（如金色光芒、呼吸法）。
            5. **語言：** 請使用繁體中文回答。
            
            以下是課程講義內容供你參考：
            ${context}
        `;

        try {
            const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            role: "user",
                            parts: [{ text: userText }]
                        }],
                        systemInstruction: {
                            parts: [{ text: systemPrompt }]
                        }
                    })
                }
            );

            const data = await response.json();
            const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text || "抱歉，我現在有點累，請稍後再試。";

            // Remove loading
            const loadingMsg = document.getElementById('loading-msg');
            if (loadingMsg) loadingMsg.remove();

            // Add AI Message
            const aiDiv = document.createElement('div');
            aiDiv.className = 'ai-msg ai-message';
            // Simple markdown parsing
            aiDiv.innerHTML = marked.parse(aiText);
            chatContainer.appendChild(aiDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

        } catch (error) {
            console.error(error);
            const loadingMsg = document.getElementById('loading-msg');
            if (loadingMsg) loadingMsg.remove();
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'ai-msg ai-message';
            errorDiv.innerText = "連線發生錯誤，請稍後再試。";
            chatContainer.appendChild(errorDiv);
        }
    }

    // Allow Enter key to send
    document.getElementById('user-input').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
    
    // Scroll active link into view logic
    window.addEventListener('scroll', () => {
        const sections = document.querySelectorAll('section, #intro');
        const navLinks = document.querySelectorAll('.nav-link');
        let current = '';

        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (pageYOffset >= (sectionTop - 200)) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').includes(current)) {
                link.classList.add('active');
            }
        });
    });
</script>

</body>
</html>
